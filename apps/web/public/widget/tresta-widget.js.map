{"version":3,"file":"tresta-widget.js","sources":["../src/styles.ts","../src/renderer.ts","../src/carousel.ts","../src/widget.ts","../src/index.ts"],"sourcesContent":["/**\r\n * Tresta Widget Styles\r\n * Generates dynamic CSS styles for the widget based on theme configuration\r\n */\r\n\r\nimport type { WidgetTheme, WidgetLayout } from \"./types.ts\";\r\n\r\n/**\r\n * Default theme values - Modern, clean aesthetic\r\n */\r\nexport const DEFAULT_THEME: WidgetTheme = {\r\n  primaryColor: \"#3b82f6\",\r\n  backgroundColor: \"transparent\",\r\n  textColor: \"#1f2937\",\r\n  cardBackgroundColor: \"#ffffff\",\r\n  borderRadius: 12,\r\n  fontFamily:\r\n    '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\r\n  starColor: \"#fbbf24\", // Warm gold for stars\r\n};\r\n\r\n/**\r\n * Generates CSS string for widget styles\r\n */\r\nexport function generateStyles(\r\n  theme: WidgetTheme,\r\n  _layout: WidgetLayout,\r\n  widgetId: string,\r\n  settings?: any,\r\n): string {\r\n  const t = { ...DEFAULT_THEME, ...theme };\r\n  const prefix = `.tresta-widget-${widgetId}`;\r\n  const gap = settings?.gap || 24;\r\n  const columns = settings?.columns || 2;\r\n\r\n  return `\r\n    /* Base Widget Container */\r\n    ${prefix} {\r\n      font-family: ${t.fontFamily};\r\n      color: ${t.textColor};\r\n      background-color: transparent;\r\n      width: 100%;\r\n      max-width: 100%;\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n    }\r\n\r\n    ${prefix} * {\r\n      box-sizing: border-box;\r\n    }\r\n\r\n    /* Widget Inner Container */\r\n    ${prefix} .tresta-widget-inner {\r\n      width: 100%;\r\n      padding: 0;\r\n      margin: 0;\r\n    }\r\n\r\n    /* Loading State */\r\n    ${prefix} .tresta-loading {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 40px;\r\n      color: ${t.primaryColor};\r\n      font-size: 16px;\r\n    }\r\n\r\n    ${prefix} .tresta-spinner {\r\n      width: 40px;\r\n      height: 40px;\r\n      border: 3px solid ${t.cardBackgroundColor};\r\n      border-top-color: ${t.primaryColor};\r\n      border-radius: 50%;\r\n      animation: tresta-spin 0.8s linear infinite;\r\n    }\r\n\r\n    @keyframes tresta-spin {\r\n      to { transform: rotate(360deg); }\r\n    }\r\n\r\n    /* Error State */\r\n    ${prefix} .tresta-error {\r\n      padding: 20px;\r\n      background-color: #fee2e2;\r\n      color: #991b1b;\r\n      border-radius: ${t.borderRadius}px;\r\n      text-align: center;\r\n    }\r\n\r\n    /* Empty State */\r\n    ${prefix} .tresta-empty {\r\n      padding: 40px;\r\n      text-align: center;\r\n      color: #6b7280;\r\n    }\r\n\r\n    /* Testimonial Card - Base */\r\n    ${prefix} .tresta-testimonial {\r\n      background-color: ${t.cardBackgroundColor};\r\n      border: 1px solid rgba(0, 0, 0, 0.08);\r\n      border-radius: ${t.borderRadius}px;\r\n      padding: 28px;\r\n      margin-bottom: 16px;\r\n      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n      height: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.04), 0 1px 2px -1px rgba(0, 0, 0, 0.02);\r\n    }\r\n\r\n    ${prefix} .tresta-testimonial:hover {\r\n      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.08), 0 8px 10px -6px rgba(0, 0, 0, 0.04);\r\n      border-color: ${t.primaryColor}40;\r\n      transform: translateY(-2px);\r\n    }\r\n\r\n    ${prefix}.tresta-layout-grid .tresta-testimonial {\r\n      margin-bottom: 0;\r\n    }\r\n\r\n    /* Rating Stars */\r\n    ${prefix} .tresta-rating {\r\n      display: flex;\r\n      gap: 3px;\r\n      margin-bottom: 18px;\r\n      line-height: 1;\r\n    }\r\n\r\n    ${prefix} .tresta-star {\r\n      display: inline-block;\r\n      width: 18px;\r\n      height: 18px;\r\n      min-width: 18px;\r\n      min-height: 18px;\r\n      max-width: 18px;\r\n      max-height: 18px;\r\n      color: ${t.starColor};\r\n      fill: ${t.starColor};\r\n      flex-shrink: 0;\r\n      filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.1));\r\n    }\r\n\r\n    ${prefix} .tresta-star-empty {\r\n      color: #e5e7eb;\r\n      fill: #e5e7eb;\r\n      filter: none;\r\n    }\r\n\r\n    /* Testimonial Content */\r\n    ${prefix} .tresta-content {\r\n      font-size: 15px;\r\n      line-height: 1.7;\r\n      color: ${t.textColor};\r\n      margin-bottom: 20px;\r\n      flex: 1;\r\n      display: -webkit-box;\r\n      -webkit-line-clamp: 5;\r\n      -webkit-box-orient: vertical;\r\n      overflow: hidden;\r\n      opacity: 0.95;\r\n    }\r\n\r\n    /* Author Section */\r\n    ${prefix} .tresta-author {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 14px;\r\n      margin-top: auto;\r\n      padding-top: 20px;\r\n      border-top: 1px solid rgba(0, 0, 0, 0.06);\r\n    }\r\n\r\n    ${prefix} .tresta-author-image {\r\n      width: 44px;\r\n      height: 44px;\r\n      border-radius: 50%;\r\n      object-fit: cover;\r\n      flex-shrink: 0;\r\n      background-color: ${t.primaryColor};\r\n      color: white;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-weight: 600;\r\n      font-size: 17px;\r\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\r\n    }\r\n\r\n    ${prefix} .tresta-author-image.tresta-author-initials {\r\n      /* Initials fallback - background color is set inline for unique colors */\r\n      color: white;\r\n      text-transform: uppercase;\r\n    }\r\n\r\n    ${prefix} .tresta-author-info {\r\n      flex: 1;\r\n      min-width: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-author-name {\r\n      font-weight: 600;\r\n      font-size: 15px;\r\n      color: ${t.textColor};\r\n      margin: 0 0 4px 0;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 6px;\r\n    }\r\n\r\n    ${prefix} .tresta-verified-badge {\r\n      display: inline-flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      flex-shrink: 0;\r\n      color: #10b981;\r\n      border-radius: 50%;\r\n      width: 18px;\r\n      height: 18px;\r\n      padding: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-verified-badge svg {\r\n      width: 100%;\r\n      height: 100%;\r\n      filter: drop-shadow(0 1px 2px rgba(16, 185, 129, 0.2));\r\n    }\r\n\r\n    ${prefix} .tresta-author-role {\r\n      font-size: 13px;\r\n      color: #6b7280;\r\n      margin: 0;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n    }\r\n\r\n    ${prefix} .tresta-author-company {\r\n      font-size: 12px;\r\n      color: #9ca3af;\r\n    }\r\n\r\n    /* Date */\r\n    ${prefix} .tresta-date {\r\n      font-size: 12px;\r\n      color: #9ca3af;\r\n      margin-top: 12px;\r\n      text-align: left;\r\n    }\r\n\r\n    /* Layout: List */\r\n    ${prefix}.tresta-layout-list .tresta-testimonials {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 16px;\r\n    }\r\n\r\n    /* Layout: Grid */\r\n    ${prefix}.tresta-layout-grid .tresta-testimonials {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\r\n      gap: ${gap}px;\r\n      align-items: stretch;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-grid .tresta-testimonial {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n    }\r\n\r\n    @media (min-width: 768px) {\r\n      ${prefix}.tresta-layout-grid .tresta-testimonials {\r\n        grid-template-columns: repeat(${Math.min(columns, 2)}, 1fr);\r\n      }\r\n    }\r\n\r\n    @media (min-width: 1024px) {\r\n      ${prefix}.tresta-layout-grid .tresta-testimonials {\r\n        grid-template-columns: repeat(${columns}, 1fr);\r\n      }\r\n    }\r\n\r\n    @media (max-width: 767px) {\r\n      ${prefix}.tresta-layout-grid .tresta-testimonials {\r\n        grid-template-columns: 1fr;\r\n      }\r\n    }\r\n\r\n    /* Layout: Masonry */\r\n    ${prefix}.tresta-layout-masonry .tresta-testimonials {\r\n      column-count: 3;\r\n      column-gap: ${gap}px;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-masonry .tresta-testimonial {\r\n      break-inside: avoid;\r\n      margin-bottom: ${gap}px;\r\n    }\r\n\r\n    @media (max-width: 1024px) {\r\n      ${prefix}.tresta-layout-masonry .tresta-testimonials {\r\n        column-count: 2;\r\n      }\r\n    }\r\n\r\n    @media (max-width: 640px) {\r\n      ${prefix}.tresta-layout-masonry .tresta-testimonials {\r\n        column-count: 1;\r\n      }\r\n    }\r\n\r\n    /* Layout: Carousel - Enhanced Flexbox Layout */\r\n    ${prefix}.tresta-layout-carousel .tresta-carousel {\r\n      position: relative;\r\n      width: 100%;\r\n      max-width: 1000px;\r\n      margin: 0 auto;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-container {\r\n      width: 100%;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-wrapper {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 20px;\r\n      width: 100%;\r\n    }\r\n\r\n    /* Hide navigation buttons on mobile (touch enabled) */\r\n    @media (max-width: 768px) {\r\n      ${prefix} .tresta-carousel-wrapper {\r\n        gap: 0;\r\n      }\r\n      \r\n      ${prefix} .tresta-carousel-nav-button {\r\n        display: none !important;\r\n      }\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-card {\r\n      background-color: ${t.cardBackgroundColor};\r\n      border: 1px solid rgba(0, 0, 0, 0.08);\r\n      border-radius: ${t.borderRadius}px;\r\n      padding: 48px 60px;\r\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);\r\n      transition: opacity 0.3s ease-in-out;\r\n      min-height: 400px;\r\n      display: flex;\r\n      align-items: stretch;\r\n      flex: 1;\r\n      width: 100%;\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n      ${prefix} .tresta-carousel-card {\r\n        padding: 32px 24px;\r\n        min-height: 350px;\r\n      }\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-content {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 32px;\r\n      width: 100%;\r\n      flex: 1;\r\n      min-height: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-rating {\r\n      display: flex;\r\n      gap: 4px;\r\n      justify-content: flex-start;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-star-filled {\r\n      color: ${t.starColor};\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-star-empty {\r\n      color: #e5e7eb;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-quote-container {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      min-height: 0;\r\n      overflow: hidden;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-quote {\r\n      font-size: 20px;\r\n      line-height: 1.7;\r\n      color: ${t.textColor};\r\n      font-style: normal;\r\n      margin: 0;\r\n      font-weight: 400;\r\n      overflow-y: auto;\r\n      flex: 1;\r\n    }\r\n\r\n    @media (max-width: 768px) {\r\n      ${prefix} .tresta-carousel-quote {\r\n        font-size: 17px;\r\n      }\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-author {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n      padding-top: 8px;\r\n      flex-shrink: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-avatar {\r\n      width: 48px;\r\n      height: 48px;\r\n      border-radius: 50%;\r\n      object-fit: cover;\r\n      flex-shrink: 0;\r\n      background-color: #e5e7eb;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-avatar-initials {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-weight: 600;\r\n      font-size: 18px;\r\n      color: white;\r\n      text-transform: uppercase;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-author-info {\r\n      flex: 1;\r\n      min-width: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-author-name {\r\n      font-weight: 600;\r\n      font-size: 15px;\r\n      color: ${t.textColor};\r\n      margin: 0 0 4px 0;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 6px;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-author-role {\r\n      font-size: 13px;\r\n      color: #6b7280;\r\n      margin: 0;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-date {\r\n      font-size: 12px;\r\n      color: #9ca3af;\r\n      margin-top: 12px;\r\n      text-align: left;\r\n    }\r\n\r\n    /* Carousel Navigation Buttons - Flexbox Layout */\r\n    ${prefix} .tresta-carousel-nav-button {\r\n      background-color: ${t.cardBackgroundColor};\r\n      color: ${t.textColor};\r\n      border: 1px solid rgba(0, 0, 0, 0.1);\r\n      border-radius: 50%;\r\n      width: 48px;\r\n      height: 48px;\r\n      min-width: 48px;\r\n      min-height: 48px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      cursor: pointer;\r\n      transition: all 0.2s ease;\r\n      flex-shrink: 0;\r\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-nav-button:hover {\r\n      transform: scale(1.08);\r\n      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\r\n      background-color: ${t.primaryColor};\r\n      color: white;\r\n      border-color: ${t.primaryColor};\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-nav-button:focus {\r\n      outline: none;\r\n      box-shadow: 0 0 0 3px ${t.primaryColor}40;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-nav-button:active {\r\n      transform: scale(0.95);\r\n    }\r\n\r\n    /* Carousel Indicators */\r\n    ${prefix} .tresta-carousel-indicators {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      gap: 8px;\r\n      margin-top: 24px;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-indicator {\r\n      width: 32px;\r\n      height: 4px;\r\n      border-radius: 2px;\r\n      background-color: ${t.primaryColor}50;\r\n      border: none;\r\n      padding: 0;\r\n      cursor: pointer;\r\n      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-indicator:hover {\r\n      background-color: ${t.primaryColor}80;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-indicator-active {\r\n      width: 48px;\r\n      background-color: ${t.primaryColor};\r\n    }\r\n\r\n    /* Carousel Autoplay Toggle */\r\n    ${prefix} .tresta-carousel-autoplay-container {\r\n      display: flex;\r\n      justify-content: center;\r\n      margin-top: 16px;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-autoplay-toggle {\r\n      background: none;\r\n      border: none;\r\n      color: #6b7280;\r\n      font-size: 14px;\r\n      cursor: pointer;\r\n      padding: 8px 16px;\r\n      transition: color 0.2s ease;\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 6px;\r\n    }\r\n\r\n    ${prefix} .tresta-carousel-autoplay-toggle:hover {\r\n      color: #1f2937;\r\n    }\r\n\r\n    /* Carousel Empty State */\r\n    ${prefix} .tresta-carousel-empty {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 32px;\r\n      color: #6b7280;\r\n      text-align: center;\r\n    }\r\n\r\n    /* Layout: Wall (Minimal) */\r\n    ${prefix}.tresta-layout-wall .tresta-testimonials {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n      gap: 12px;\r\n      width: 100%;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-testimonial {\r\n      padding: 16px;\r\n      margin-bottom: 0;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-content {\r\n      font-size: 14px;\r\n      margin-bottom: 12px;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-author {\r\n      gap: 8px;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-author-image {\r\n      width: 36px;\r\n      height: 36px;\r\n      font-size: 14px;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-author-name {\r\n      font-size: 14px;\r\n    }\r\n\r\n    ${prefix}.tresta-layout-wall .tresta-author-role {\r\n      font-size: 12px;\r\n    }\r\n\r\n    /* Fade-in Animation */\r\n    ${prefix} .tresta-fade-in {\r\n      animation: tresta-fadeIn 0.5s ease;\r\n    }\r\n\r\n    @keyframes tresta-fadeIn {\r\n      from {\r\n        opacity: 0;\r\n        transform: translateY(10px);\r\n      }\r\n      to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n      }\r\n    }\r\n\r\n    /* Responsive */\r\n    @media (max-width: 640px) {\r\n      ${prefix} .tresta-testimonial {\r\n        padding: 20px;\r\n      }\r\n\r\n      ${prefix} .tresta-content {\r\n        font-size: 15px;\r\n      }\r\n\r\n      ${prefix} .tresta-author {\r\n        gap: 10px;\r\n      }\r\n\r\n      ${prefix} .tresta-author-image {\r\n        width: 40px;\r\n        height: 40px;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n\r\n    /* Branding (Optional) */\r\n    ${prefix} .tresta-branding {\r\n      text-align: center;\r\n      margin-top: 24px;\r\n      padding-top: 16px;\r\n      border-top: 1px solid #e5e7eb;\r\n      font-size: 12px;\r\n      color: #9ca3af;\r\n    }\r\n\r\n    ${prefix} .tresta-branding a {\r\n      color: ${t.primaryColor};\r\n      text-decoration: none;\r\n      font-weight: 500;\r\n    }\r\n\r\n    ${prefix} .tresta-branding a:hover {\r\n      text-decoration: underline;\r\n    }\r\n  `;\r\n}\r\n\r\n/**\r\n * Injects styles into the document head\r\n */\r\nexport function injectStyles(css: string, widgetId: string): void {\r\n  const styleId = `tresta-widget-styles-${widgetId}`;\r\n\r\n  // Remove existing styles for this widget\r\n  const existingStyle = document.getElementById(styleId);\r\n  if (existingStyle) {\r\n    existingStyle.remove();\r\n  }\r\n\r\n  // Create and inject new style element\r\n  const style = document.createElement(\"style\");\r\n  style.id = styleId;\r\n  style.textContent = css;\r\n  document.head.appendChild(style);\r\n}\r\n\r\n/**\r\n * Removes widget styles from the document\r\n */\r\nexport function removeStyles(widgetId: string): void {\r\n  const styleId = `tresta-widget-styles-${widgetId}`;\r\n  const style = document.getElementById(styleId);\r\n  if (style) {\r\n    style.remove();\r\n  }\r\n}\r\n","/**\r\n * Tresta Widget Renderer\r\n * Handles rendering of testimonials in different layouts\r\n */\r\n\r\nimport type { Testimonial, WidgetSettings, WidgetLayout } from \"./types.ts\";\r\n\r\n/**\r\n * Renders a single testimonial card\r\n */\r\nexport function renderTestimonial(\r\n  testimonial: Testimonial,\r\n  settings: WidgetSettings\r\n): string {\r\n  const {\r\n    showRating,\r\n    showDate,\r\n    showAvatar, // This is the actual field name from database\r\n    showAuthorRole,\r\n    showAuthorCompany\r\n  } = settings;\r\n\r\n  // Generate rating stars\r\n  const ratingHtml = showRating\r\n    ? `<div class=\"tresta-rating\">\r\n         ${Array.from({ length: 5 })\r\n           .map((_, i) =>\r\n             i < (testimonial.rating || 5)\r\n               ? '<svg class=\"tresta-star\" width=\"16\" height=\"16\" viewBox=\"0 0 20 20\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/></svg>'\r\n               : '<svg class=\"tresta-star tresta-star-empty\" width=\"16\" height=\"16\" viewBox=\"0 0 20 20\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"/></svg>'\r\n           )\r\n           .join(\"\")}\r\n       </div>`\r\n    : \"\";\r\n\r\n  // Generate author image or initials\r\n  let authorImageHtml = \"\";\r\n  if (showAvatar) {\r\n    if (testimonial.authorAvatar) {\r\n      authorImageHtml = `<img src=\"${escapeHtml(testimonial.authorAvatar)}\" alt=\"${escapeHtml(testimonial.authorName)}\" class=\"tresta-author-image\" />`;\r\n    } else {\r\n      const initials = getInitials(testimonial.authorName);\r\n      const backgroundColor = getColorFromName(testimonial.authorName);\r\n      authorImageHtml = `<div class=\"tresta-author-image tresta-author-initials\" style=\"background-color: ${backgroundColor}\">${initials}</div>`;\r\n    }\r\n  }\r\n\r\n  // Generate author role/company\r\n  let authorMetaHtml = \"\";\r\n  if (showAuthorRole && testimonial.authorRole) {\r\n    authorMetaHtml = `<p class=\"tresta-author-role\">${escapeHtml(testimonial.authorRole)}${\r\n      showAuthorCompany && testimonial.authorCompany\r\n        ? ` <span class=\"tresta-author-company\">at ${escapeHtml(testimonial.authorCompany)}</span>`\r\n        : \"\"\r\n    }</p>`;\r\n  } else if (showAuthorCompany && testimonial.authorCompany) {\r\n    authorMetaHtml = `<p class=\"tresta-author-role\"><span class=\"tresta-author-company\">${escapeHtml(testimonial.authorCompany)}</span></p>`;\r\n  }\r\n\r\n  // Generate verified badge\r\n  const verifiedBadgeHtml = testimonial.isOAuthVerified\r\n    ? `<span class=\"tresta-verified-badge\" title=\"Verified via ${testimonial.oauthProvider || \"OAuth\"}\">\r\n      <svg width=\"64px\" height=\"64px\" viewBox=\"-2.4 -2.4 28.80 28.80\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" transform=\"rotate(0)matrix(1, 0, 0, 1, 0, 0)\"><g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g><g id=\"SVGRepo_iconCarrier\"> <path d=\"M9.78133 3.89027C10.3452 3.40974 10.6271 3.16948 10.9219 3.02859C11.6037 2.70271 12.3963 2.70271 13.0781 3.02859C13.3729 3.16948 13.6548 3.40974 14.2187 3.89027C14.4431 4.08152 14.5553 4.17715 14.6752 4.25747C14.9499 4.4416 15.2584 4.56939 15.5828 4.63344C15.7244 4.66139 15.8713 4.67312 16.1653 4.69657C16.9038 4.7555 17.273 4.78497 17.5811 4.89378C18.2936 5.14546 18.8541 5.70591 19.1058 6.41844C19.2146 6.72651 19.244 7.09576 19.303 7.83426C19.3264 8.12819 19.3381 8.27515 19.3661 8.41669C19.4301 8.74114 19.5579 9.04965 19.7421 9.32437C19.8224 9.44421 19.918 9.55642 20.1093 9.78084C20.5898 10.3447 20.8301 10.6267 20.971 10.9214C21.2968 11.6032 21.2968 12.3958 20.971 13.0776C20.8301 13.3724 20.5898 13.6543 20.1093 14.2182C19.918 14.4426 19.8224 14.5548 19.7421 14.6747C19.5579 14.9494 19.4301 15.2579 19.3661 15.5824C19.3381 15.7239 19.3264 15.8709 19.303 16.1648C19.244 16.9033 19.2146 17.2725 19.1058 17.5806C18.8541 18.2931 18.2936 18.8536 17.5811 19.1053C17.273 19.2141 16.9038 19.2435 16.1653 19.3025C15.8713 19.3259 15.7244 19.3377 15.5828 19.3656C15.2584 19.4297 14.9499 19.5574 14.6752 19.7416C14.5553 19.8219 14.4431 19.9175 14.2187 20.1088C13.6548 20.5893 13.3729 20.8296 13.0781 20.9705C12.3963 21.2963 11.6037 21.2963 10.9219 20.9705C10.6271 20.8296 10.3452 20.5893 9.78133 20.1088C9.55691 19.9175 9.44469 19.8219 9.32485 19.7416C9.05014 19.5574 8.74163 19.4297 8.41718 19.3656C8.27564 19.3377 8.12868 19.3259 7.83475 19.3025C7.09625 19.2435 6.72699 19.2141 6.41893 19.1053C5.7064 18.8536 5.14594 18.2931 4.89427 17.5806C4.78546 17.2725 4.75599 16.9033 4.69706 16.1648C4.6736 15.8709 4.66188 15.7239 4.63393 15.5824C4.56988 15.2579 4.44209 14.9494 4.25796 14.6747C4.17764 14.5548 4.08201 14.4426 3.89076 14.2182C3.41023 13.6543 3.16997 13.3724 3.02907 13.0776C2.7032 12.3958 2.7032 11.6032 3.02907 10.9214C3.16997 10.6266 3.41023 10.3447 3.89076 9.78084C4.08201 9.55642 4.17764 9.44421 4.25796 9.32437C4.44209 9.04965 4.56988 8.74114 4.63393 8.41669C4.66188 8.27515 4.6736 8.12819 4.69706 7.83426C4.75599 7.09576 4.78546 6.72651 4.89427 6.41844C5.14594 5.70591 5.7064 5.14546 6.41893 4.89378C6.72699 4.78497 7.09625 4.7555 7.83475 4.69657C8.12868 4.67312 8.27564 4.66139 8.41718 4.63344C8.74163 4.56939 9.05014 4.4416 9.32485 4.25747C9.4447 4.17715 9.55691 4.08152 9.78133 3.89027Z\" stroke=\"#1C274C\" stroke-width=\"1.44\"></path> <path d=\"M8.5 12.5L10.5 14.5L15.5 9.5\" stroke=\"#1C274C\" stroke-width=\"1.44\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path> </g></svg>\r\n      </span>`\r\n    : \"\";\r\n\r\n  // Generate date\r\n  const dateHtml = showDate\r\n    ? `<div class=\"tresta-date\">${formatDate(testimonial.createdAt)}</div>`\r\n    : \"\";\r\n\r\n  return `\r\n    <div class=\"tresta-testimonial tresta-fade-in\" data-testimonial-id=\"${testimonial.id}\">\r\n      ${ratingHtml}\r\n      <div class=\"tresta-content\">\"${escapeHtml(testimonial.content)}\"</div>\r\n      <div class=\"tresta-author\">\r\n        ${authorImageHtml}\r\n        <div class=\"tresta-author-info\">\r\n          <p class=\"tresta-author-name\">\r\n            ${escapeHtml(testimonial.authorName)}\r\n            ${verifiedBadgeHtml}\r\n          </p>\r\n          ${authorMetaHtml}\r\n        </div>\r\n      </div>\r\n      ${dateHtml}\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Renders testimonials in list layout\r\n */\r\nexport function renderListLayout(\r\n  testimonials: Testimonial[],\r\n  settings: WidgetSettings\r\n): string {\r\n  const items = testimonials\r\n    .map((t) => renderTestimonial(t, settings))\r\n    .join(\"\");\r\n\r\n  return `<div class=\"tresta-testimonials\">${items}</div>`;\r\n}\r\n\r\n/**\r\n * Renders testimonials in grid layout\r\n */\r\nexport function renderGridLayout(\r\n  testimonials: Testimonial[],\r\n  settings: WidgetSettings\r\n): string {\r\n  const items = testimonials\r\n    .map((t) => renderTestimonial(t, settings))\r\n    .join(\"\");\r\n\r\n  return `<div class=\"tresta-testimonials\">${items}</div>`;\r\n}\r\n\r\n/**\r\n * Renders testimonials in masonry layout\r\n */\r\nexport function renderMasonryLayout(\r\n  testimonials: Testimonial[],\r\n  settings: WidgetSettings\r\n): string {\r\n  const items = testimonials\r\n    .map((t) => renderTestimonial(t, settings))\r\n    .join(\"\");\r\n\r\n  return `<div class=\"tresta-testimonials\">${items}</div>`;\r\n}\r\n\r\n/**\r\n * Renders testimonials in carousel layout\r\n * Note: The actual carousel content is rendered by the Carousel class\r\n */\r\nexport function renderCarouselLayout(\r\n  testimonials: Testimonial[],\r\n  settings: WidgetSettings,\r\n  widgetId: string\r\n): string {\r\n  // Return an empty container that the Carousel class will populate\r\n  return `<div class=\"tresta-carousel\" data-widget-id=\"${widgetId}\"></div>`;\r\n}\r\n\r\n/**\r\n * Renders testimonials in wall layout (minimal cards)\r\n */\r\nexport function renderWallLayout(\r\n  testimonials: Testimonial[],\r\n  settings: WidgetSettings\r\n): string {\r\n  const items = testimonials\r\n    .map((t) => renderTestimonial(t, settings))\r\n    .join(\"\");\r\n\r\n  return `<div class=\"tresta-testimonials\">${items}</div>`;\r\n}\r\n\r\n/**\r\n * Main renderer - delegates to layout-specific renderer\r\n */\r\nexport function renderWidget(\r\n  testimonials: Testimonial[],\r\n  layout: WidgetLayout,\r\n  settings: WidgetSettings,\r\n  widgetId: string\r\n): string {\r\n  if (!testimonials || testimonials.length === 0) {\r\n    return '<div class=\"tresta-empty\">No testimonials yet.</div>';\r\n  }\r\n\r\n  // Apply maxTestimonials setting\r\n  const limitedTestimonials = settings.maxTestimonials\r\n    ? testimonials.slice(0, settings.maxTestimonials)\r\n    : testimonials;\r\n\r\n  switch (layout) {\r\n    case \"carousel\":\r\n      return renderCarouselLayout(limitedTestimonials, settings, widgetId);\r\n    case \"grid\":\r\n      return renderGridLayout(limitedTestimonials, settings);\r\n    case \"masonry\":\r\n      return renderMasonryLayout(limitedTestimonials, settings);\r\n    case \"wall\":\r\n      return renderWallLayout(limitedTestimonials, settings);\r\n    case \"list\":\r\n    default:\r\n      return renderListLayout(limitedTestimonials, settings);\r\n  }\r\n}\r\n\r\n/**\r\n * Renders loading state\r\n */\r\nexport function renderLoading(): string {\r\n  return `\r\n    <div class=\"tresta-loading\">\r\n      <div class=\"tresta-spinner\"></div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Renders error state\r\n */\r\nexport function renderError(message: string): string {\r\n  return `\r\n    <div class=\"tresta-error\">\r\n      <p><strong>Unable to load testimonials</strong></p>\r\n      <p>${escapeHtml(message)}</p>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Renders branding footer (can be removed in premium plans)\r\n */\r\nexport function renderBranding(showBranding: boolean): string {\r\n  if (!showBranding) return \"\";\r\n\r\n  return `\r\n    <div class=\"tresta-branding\">\r\n      Powered by <a href=\"https://tresta.io\" target=\"_blank\" rel=\"noopener\">Tresta</a>\r\n    </div>\r\n  `;\r\n}\r\n\r\n// ==================== Utility Functions ====================\r\n\r\n/**\r\n * Escapes HTML to prevent XSS attacks\r\n */\r\nfunction escapeHtml(unsafe: string): string {\r\n  return unsafe\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")\r\n    .replace(/>/g, \"&gt;\")\r\n    .replace(/\"/g, \"&quot;\")\r\n    .replace(/'/g, \"&#039;\");\r\n}\r\n\r\n/**\r\n * Gets initials from a name\r\n */\r\nfunction getInitials(name: string): string {\r\n  const parts = name.trim().split(/\\s+/);\r\n  if (parts.length === 1) {\r\n    return parts[0]?.charAt(0).toUpperCase() ?? \"\";\r\n  }\r\n  const first = parts[0]?.charAt(0) ?? \"\";\r\n  const last = parts[parts.length - 1]?.charAt(0) ?? \"\";\r\n  return (first + last).toUpperCase();\r\n}\r\n\r\n/**\r\n * Generate a consistent color based on name\r\n * Uses a simple hash function to generate a hue value\r\n */\r\nfunction getColorFromName(name: string): string {\r\n  let hash = 0;\r\n  for (let i = 0; i < name.length; i++) {\r\n    hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n  }\r\n\r\n  const hue = hash % 360;\r\n  return `hsl(${hue}, 65%, 50%)`;\r\n}\r\n\r\n/**\r\n * Formats a date string to a relative time format (e.g., \"2 days ago\")\r\n */\r\nfunction formatDate(dateString: string): string {\r\n  try {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffSec = Math.floor(diffMs / 1000);\r\n    const diffMin = Math.floor(diffSec / 60);\r\n    const diffHour = Math.floor(diffMin / 60);\r\n    const diffDay = Math.floor(diffHour / 24);\r\n    const diffWeek = Math.floor(diffDay / 7);\r\n    const diffMonth = Math.floor(diffDay / 30);\r\n    const diffYear = Math.floor(diffDay / 365);\r\n\r\n    if (diffSec < 60) {\r\n      return \"just now\";\r\n    } else if (diffMin < 60) {\r\n      return `${diffMin} ${diffMin === 1 ? \"minute\" : \"minutes\"} ago`;\r\n    } else if (diffHour < 24) {\r\n      return `${diffHour} ${diffHour === 1 ? \"hour\" : \"hours\"} ago`;\r\n    } else if (diffDay < 7) {\r\n      return `${diffDay} ${diffDay === 1 ? \"day\" : \"days\"} ago`;\r\n    } else if (diffWeek < 4) {\r\n      return `${diffWeek} ${diffWeek === 1 ? \"week\" : \"weeks\"} ago`;\r\n    } else if (diffMonth < 12) {\r\n      return `${diffMonth} ${diffMonth === 1 ? \"month\" : \"months\"} ago`;\r\n    } else {\r\n      return `${diffYear} ${diffYear === 1 ? \"year\" : \"years\"} ago`;\r\n    }\r\n  } catch {\r\n    return dateString;\r\n  }\r\n}\r\n","/**\r\n * Enhanced Carousel Module\r\n * Provides smooth animations, touch support, and advanced carousel features\r\n * Styled with Tailwind CSS utilities\r\n */\r\n\r\nexport interface Testimonial {\r\n    id: string;\r\n    name: string;\r\n    role: string;\r\n    company?: string;\r\n    content: string;\r\n    avatar?: string;\r\n    rating?: number;\r\n    createdAt: string;\r\n    isOAuthVerified?: boolean;\r\n    oauthProvider?: string | null;\r\n}\r\n\r\nexport interface CarouselOptions {\r\n    container: HTMLElement;\r\n    testimonials: Testimonial[];\r\n    autoplay?: boolean;\r\n    autoplaySpeed?: number;\r\n    showRating?: boolean;\r\n    showCompany?: boolean;\r\n    showAvatar?: boolean;\r\n    showDate?: boolean;\r\n    showNavigation?: boolean; // Show/hide prev/next buttons\r\n    onSlideChange?: (index: number) => void;\r\n}\r\n\r\nexport class Carousel {\r\n    private container: HTMLElement;\r\n    private testimonials: Testimonial[];\r\n    private currentIndex: number = 0;\r\n    private autoplayInterval: number | null = null;\r\n    private autoplay: boolean;\r\n    private autoplaySpeed: number;\r\n    private showRating: boolean;\r\n    private showCompany: boolean;\r\n    private showAvatar: boolean;\r\n    private showDate: boolean;\r\n    private showNavigation: boolean;\r\n    private onSlideChange?: (index: number) => void;\r\n    private isAutoPlayActive: boolean;\r\n\r\n    // Touch support\r\n    private touchStartX: number = 0;\r\n    private touchEndX: number = 0;\r\n    private isDragging: boolean = false;\r\n\r\n    // DOM elements\r\n    private carouselCard: HTMLElement | null = null;\r\n    private contentContainer: HTMLElement | null = null;\r\n    private prevButton: HTMLElement | null = null;\r\n    private nextButton: HTMLElement | null = null;\r\n    private indicatorsContainer: HTMLElement | null = null;\r\n    private autoplayToggle: HTMLElement | null = null;\r\n\r\n    constructor(options: CarouselOptions) {\r\n        this.container = options.container;\r\n        this.testimonials = options.testimonials;\r\n        this.autoplay = options.autoplay ?? true;\r\n        this.autoplaySpeed = options.autoplaySpeed ?? 5000;\r\n        this.showRating = options.showRating ?? true;\r\n        this.showCompany = options.showCompany ?? true;\r\n        this.showAvatar = options.showAvatar ?? true;\r\n        this.showDate = options.showDate ?? true;\r\n        this.showNavigation = options.showNavigation ?? true;\r\n        this.onSlideChange = options.onSlideChange;\r\n        this.isAutoPlayActive = this.autoplay;\r\n\r\n        this.init();\r\n    }\r\n\r\n    private init(): void {\r\n        if (!this.testimonials.length) {\r\n            this.renderEmptyState();\r\n            return;\r\n        }\r\n\r\n        this.render();\r\n        this.setupControls();\r\n        this.setupTouchSupport();\r\n        this.setupKeyboardNavigation();\r\n\r\n        if (this.autoplay) {\r\n            this.startAutoplay();\r\n            this.setupAutoplayPause();\r\n        }\r\n    }\r\n\r\n    private renderEmptyState(): void {\r\n        this.container.innerHTML = `\r\n            <div class=\"tresta-carousel-empty\">\r\n                No testimonials available\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    private render(): void {\r\n        // Clear container\r\n        this.container.innerHTML = '';\r\n        this.container.className = 'tresta-carousel-container';\r\n\r\n        // Create main structure with flexbox layout\r\n        const wrapper = document.createElement('div');\r\n        wrapper.className = 'tresta-carousel-wrapper';\r\n\r\n        // Create navigation buttons first (for flex order: prev, card, next)\r\n        if (this.showNavigation) {\r\n            this.prevButton = this.createNavigationButton('prev', 'Previous testimonial');\r\n            wrapper.appendChild(this.prevButton);\r\n        }\r\n\r\n        // Create carousel card (will expand to fill available space)\r\n        this.carouselCard = document.createElement('div');\r\n        this.carouselCard.className = 'tresta-carousel-card';\r\n\r\n        // Create content container\r\n        this.contentContainer = document.createElement('div');\r\n        this.contentContainer.className = 'tresta-carousel-content';\r\n\r\n        this.carouselCard.appendChild(this.contentContainer);\r\n        wrapper.appendChild(this.carouselCard);\r\n\r\n        // Add next button after card\r\n        if (this.showNavigation) {\r\n            this.nextButton = this.createNavigationButton('next', 'Next testimonial');\r\n            wrapper.appendChild(this.nextButton);\r\n        }\r\n\r\n        this.container.appendChild(wrapper);\r\n\r\n        // Create indicators\r\n        this.indicatorsContainer = document.createElement('div');\r\n        this.indicatorsContainer.className = 'tresta-carousel-indicators';\r\n        this.container.appendChild(this.indicatorsContainer);\r\n\r\n        // Create autoplay toggle\r\n        const autoplayContainer = document.createElement('div');\r\n        autoplayContainer.className = 'tresta-carousel-autoplay-container';\r\n        this.autoplayToggle = document.createElement('button');\r\n        this.autoplayToggle.className = 'tresta-carousel-autoplay-toggle';\r\n        autoplayContainer.appendChild(this.autoplayToggle);\r\n        this.container.appendChild(autoplayContainer);\r\n\r\n        // Render indicators\r\n        this.renderIndicators();\r\n\r\n        // Render initial testimonial\r\n        this.renderTestimonial();\r\n    }\r\n\r\n    private createNavigationButton(direction: 'prev' | 'next', label: string): HTMLElement {\r\n        const button = document.createElement('button');\r\n        button.setAttribute('data-action', direction);\r\n        button.setAttribute('aria-label', label);\r\n        button.className = `tresta-carousel-nav-button tresta-carousel-nav-${direction}`;\r\n\r\n        // Create professional chevron SVG icon\r\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svg.setAttribute('width', '24');\r\n        svg.setAttribute('height', '24');\r\n        svg.setAttribute('viewBox', '0 0 24 24');\r\n        svg.setAttribute('fill', 'none');\r\n        svg.setAttribute('stroke', 'currentColor');\r\n        svg.setAttribute('stroke-width', '2.5');\r\n        svg.setAttribute('stroke-linecap', 'round');\r\n        svg.setAttribute('stroke-linejoin', 'round');\r\n\r\n        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        // Professional chevron paths\r\n        if (direction === 'prev') {\r\n            path.setAttribute('d', 'M15 18l-6-6 6-6');\r\n        } else {\r\n            path.setAttribute('d', 'M9 18l6-6-6-6');\r\n        }\r\n\r\n        svg.appendChild(path);\r\n        button.appendChild(svg);\r\n\r\n        return button;\r\n    }\r\n\r\n    private renderIndicators(): void {\r\n        if (!this.indicatorsContainer) return;\r\n\r\n        this.indicatorsContainer.innerHTML = '';\r\n\r\n        this.testimonials.forEach((_, index) => {\r\n            const indicator = document.createElement('button');\r\n            indicator.setAttribute('aria-label', `Go to testimonial ${index + 1}`);\r\n            indicator.setAttribute('data-index', String(index));\r\n            indicator.className = index === this.currentIndex\r\n                ? 'tresta-carousel-indicator tresta-carousel-indicator-active'\r\n                : 'tresta-carousel-indicator';\r\n\r\n            if (index === this.currentIndex) {\r\n                indicator.setAttribute('aria-current', 'true');\r\n            }\r\n\r\n            if (this.indicatorsContainer) {\r\n                this.indicatorsContainer.appendChild(indicator);\r\n            }\r\n        });\r\n    }\r\n\r\n    private renderTestimonial(): void {\r\n        if (!this.contentContainer) return;\r\n\r\n        const testimonial = this.testimonials[this.currentIndex];\r\n        if (!testimonial) return;\r\n\r\n        this.contentContainer.innerHTML = '';\r\n\r\n        // Rating\r\n        if (this.showRating && testimonial.rating) {\r\n            const ratingContainer = document.createElement('div');\r\n            ratingContainer.className = 'tresta-carousel-rating';\r\n\r\n            for (let i = 0; i < 5; i++) {\r\n                const star = this.createStarIcon(i < testimonial.rating);\r\n                ratingContainer.appendChild(star);\r\n            }\r\n\r\n            this.contentContainer.appendChild(ratingContainer);\r\n        }\r\n\r\n        // Testimonial text - wrapped in a container for proper flex behavior\r\n        const quoteContainer = document.createElement('div');\r\n        quoteContainer.className = 'tresta-carousel-quote-container';\r\n\r\n        const blockquote = document.createElement('blockquote');\r\n        blockquote.className = 'tresta-carousel-quote';\r\n        blockquote.textContent = `\"${testimonial.content}\"`;\r\n\r\n        quoteContainer.appendChild(blockquote);\r\n        this.contentContainer.appendChild(quoteContainer);\r\n\r\n        // Author info\r\n        const authorContainer = document.createElement('div');\r\n        authorContainer.className = 'tresta-carousel-author';\r\n\r\n        // Avatar with fallback to colored initials\r\n        if (this.showAvatar) {\r\n            let avatarElement: HTMLElement;\r\n            \r\n            if (testimonial.avatar) {\r\n                // Show actual avatar image\r\n                avatarElement = document.createElement('img');\r\n                avatarElement.className = 'tresta-carousel-avatar';\r\n                (avatarElement as HTMLImageElement).src = testimonial.avatar;\r\n                (avatarElement as HTMLImageElement).alt = testimonial.name;\r\n            } else {\r\n                // Show colored initials\r\n                avatarElement = document.createElement('div');\r\n                avatarElement.className = 'tresta-carousel-avatar tresta-carousel-avatar-initials';\r\n                const initials = this.getInitials(testimonial.name);\r\n                const backgroundColor = this.getColorFromName(testimonial.name);\r\n                avatarElement.style.backgroundColor = backgroundColor;\r\n                avatarElement.style.color = 'white';\r\n                avatarElement.style.display = 'flex';\r\n                avatarElement.style.alignItems = 'center';\r\n                avatarElement.style.justifyContent = 'center';\r\n                avatarElement.style.fontWeight = '600';\r\n                avatarElement.style.fontSize = '18px';\r\n                avatarElement.textContent = initials;\r\n            }\r\n            \r\n            authorContainer.appendChild(avatarElement);\r\n        }\r\n\r\n        const authorInfo = document.createElement('div');\r\n        authorInfo.className = 'tresta-carousel-author-info';\r\n\r\n        const nameContainer = document.createElement('p');\r\n        nameContainer.className = 'tresta-carousel-author-name';\r\n        nameContainer.textContent = testimonial.name;\r\n        \r\n        // Add verified badge if OAuth verified\r\n        if (testimonial.isOAuthVerified) {\r\n            const badge = document.createElement('span');\r\n            badge.className = 'tresta-verified-badge';\r\n            badge.title = `Verified via ${testimonial.oauthProvider || 'OAuth'}`;\r\n            badge.innerHTML = `<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n              <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n            </svg>`;\r\n            nameContainer.appendChild(badge);\r\n        }\r\n        \r\n        authorInfo.appendChild(nameContainer);\r\n\r\n        const role = document.createElement('p');\r\n        role.className = 'tresta-carousel-author-role';\r\n        let roleText = testimonial.role;\r\n        if (this.showCompany && testimonial.company) {\r\n            roleText += ` at ${testimonial.company}`;\r\n        }\r\n        role.textContent = roleText;\r\n        authorInfo.appendChild(role);\r\n\r\n        authorContainer.appendChild(authorInfo);\r\n        this.contentContainer.appendChild(authorContainer);\r\n\r\n        // Date (relative format)\r\n        if (this.showDate) {\r\n            const dateElement = document.createElement('div');\r\n            dateElement.className = 'tresta-carousel-date';\r\n            dateElement.textContent = this.formatRelativeDate(testimonial.createdAt);\r\n            this.contentContainer.appendChild(dateElement);\r\n        }\r\n\r\n        // Update autoplay toggle\r\n        this.updateAutoplayToggle();\r\n    }\r\n\r\n    private createStarIcon(filled: boolean): SVGElement {\r\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svg.setAttribute('width', '20');\r\n        svg.setAttribute('height', '20');\r\n        svg.setAttribute('viewBox', '0 0 24 24');\r\n        svg.setAttribute('fill', filled ? 'currentColor' : 'none');\r\n        svg.setAttribute('stroke', filled ? 'currentColor' : 'currentColor');\r\n        svg.setAttribute('stroke-width', '1.5');\r\n        svg.setAttribute('stroke-linecap', 'round');\r\n        svg.setAttribute('stroke-linejoin', 'round');\r\n        svg.setAttribute('class', filled ? 'tresta-carousel-star-filled' : 'tresta-carousel-star-empty');\r\n\r\n        // Professional star icon path\r\n        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        path.setAttribute('d', 'M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z');\r\n\r\n        svg.appendChild(path);\r\n        return svg;\r\n    }\r\n\r\n    private updateAutoplayToggle(): void {\r\n        if (!this.autoplayToggle) return;\r\n\r\n        // Clear existing content\r\n        this.autoplayToggle.innerHTML = '';\r\n\r\n        // Create icon\r\n        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        svg.setAttribute('width', '14');\r\n        svg.setAttribute('height', '14');\r\n        svg.setAttribute('viewBox', '0 0 24 24');\r\n        svg.setAttribute('fill', 'currentColor');\r\n        svg.setAttribute('stroke', 'none');\r\n        svg.style.marginRight = '6px';\r\n\r\n        if (this.isAutoPlayActive) {\r\n            // Pause icon (two vertical bars)\r\n            const rect1 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            rect1.setAttribute('x', '6');\r\n            rect1.setAttribute('y', '4');\r\n            rect1.setAttribute('width', '4');\r\n            rect1.setAttribute('height', '16');\r\n            rect1.setAttribute('rx', '1');\r\n\r\n            const rect2 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            rect2.setAttribute('x', '14');\r\n            rect2.setAttribute('y', '4');\r\n            rect2.setAttribute('width', '4');\r\n            rect2.setAttribute('height', '16');\r\n            rect2.setAttribute('rx', '1');\r\n\r\n            svg.appendChild(rect1);\r\n            svg.appendChild(rect2);\r\n        } else {\r\n            // Play icon (triangle)\r\n            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n            path.setAttribute('d', 'M8 5v14l11-7z');\r\n            svg.appendChild(path);\r\n        }\r\n\r\n        this.autoplayToggle.appendChild(svg);\r\n\r\n        // Add text\r\n        const text = document.createTextNode(this.isAutoPlayActive ? 'Pause' : 'Play');\r\n        this.autoplayToggle.appendChild(text);\r\n    }\r\n\r\n    private setupControls(): void {\r\n        this.prevButton?.addEventListener('click', () => this.prev());\r\n        this.nextButton?.addEventListener('click', () => this.next());\r\n\r\n        // Setup indicator clicks\r\n        if (this.indicatorsContainer) {\r\n            this.indicatorsContainer.addEventListener('click', (e) => {\r\n                const target = e.target as HTMLElement;\r\n                const index = target.getAttribute('data-index');\r\n                if (index !== null) {\r\n                    this.goToSlide(parseInt(index, 10));\r\n                }\r\n            });\r\n        }\r\n\r\n        // Setup autoplay toggle\r\n        this.autoplayToggle?.addEventListener('click', () => {\r\n            this.isAutoPlayActive = !this.isAutoPlayActive;\r\n            if (this.isAutoPlayActive) {\r\n                this.startAutoplay();\r\n            } else {\r\n                this.stopAutoplay();\r\n            }\r\n            this.updateAutoplayToggle();\r\n        });\r\n    }\r\n\r\n    private setupTouchSupport(): void {\r\n        if (!this.carouselCard) return;\r\n\r\n        this.carouselCard.addEventListener('touchstart', (e) => {\r\n            const touch = e.touches[0];\r\n            if (touch) {\r\n                this.touchStartX = touch.clientX;\r\n                this.isDragging = true;\r\n            }\r\n        }, { passive: true });\r\n\r\n        this.carouselCard.addEventListener('touchmove', (e) => {\r\n            if (!this.isDragging) return;\r\n            const touch = e.touches[0];\r\n            if (touch) {\r\n                this.touchEndX = touch.clientX;\r\n            }\r\n        }, { passive: true });\r\n\r\n        this.carouselCard.addEventListener('touchend', () => {\r\n            if (!this.isDragging) return;\r\n            this.isDragging = false;\r\n\r\n            const diff = this.touchStartX - this.touchEndX;\r\n            const threshold = 50; // Minimum swipe distance\r\n\r\n            if (Math.abs(diff) > threshold) {\r\n                if (diff > 0) {\r\n                    this.next();\r\n                } else {\r\n                    this.prev();\r\n                }\r\n            }\r\n        });\r\n\r\n        // Mouse drag support for desktop\r\n        let mouseStartX = 0;\r\n        let isMouseDragging = false;\r\n\r\n        this.carouselCard.addEventListener('mousedown', (e) => {\r\n            mouseStartX = e.clientX;\r\n            isMouseDragging = true;\r\n            if (this.carouselCard) {\r\n                this.carouselCard.style.cursor = 'grabbing';\r\n            }\r\n        });\r\n\r\n        document.addEventListener('mousemove', (e) => {\r\n            if (!isMouseDragging || !this.carouselCard) return;\r\n            // Visual feedback during drag could be added here\r\n        });\r\n\r\n        document.addEventListener('mouseup', (e) => {\r\n            if (!isMouseDragging || !this.carouselCard) return;\r\n            isMouseDragging = false;\r\n            if (this.carouselCard) {\r\n                this.carouselCard.style.cursor = 'grab';\r\n            }\r\n\r\n            const diff = mouseStartX - e.clientX;\r\n            const threshold = 50;\r\n\r\n            if (Math.abs(diff) > threshold) {\r\n                if (diff > 0) {\r\n                    this.next();\r\n                } else {\r\n                    this.prev();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    private setupKeyboardNavigation(): void {\r\n        this.container.addEventListener('keydown', (e) => {\r\n            if (e.key === 'ArrowLeft') {\r\n                e.preventDefault();\r\n                this.prev();\r\n            } else if (e.key === 'ArrowRight') {\r\n                e.preventDefault();\r\n                this.next();\r\n            }\r\n        });\r\n\r\n        // Make container focusable\r\n        this.container.setAttribute('tabindex', '0');\r\n    }\r\n\r\n    private setupAutoplayPause(): void {\r\n        if (!this.carouselCard) return;\r\n\r\n        this.carouselCard.addEventListener('mouseenter', () => {\r\n            if (this.isAutoPlayActive) {\r\n                this.stopAutoplay();\r\n            }\r\n        });\r\n\r\n        this.carouselCard.addEventListener('mouseleave', () => {\r\n            if (this.isAutoPlayActive) {\r\n                this.startAutoplay();\r\n            }\r\n        });\r\n\r\n        // Pause on focus (accessibility)\r\n        this.container.addEventListener('focus', () => {\r\n            if (this.isAutoPlayActive) {\r\n                this.stopAutoplay();\r\n            }\r\n        });\r\n\r\n        this.container.addEventListener('blur', () => {\r\n            if (this.isAutoPlayActive) {\r\n                this.startAutoplay();\r\n            }\r\n        });\r\n    }\r\n\r\n    public goToSlide(index: number): void {\r\n        // Handle wrapping\r\n        if (index < 0) {\r\n            index = this.testimonials.length - 1;\r\n        } else if (index >= this.testimonials.length) {\r\n            index = 0;\r\n        }\r\n\r\n        this.currentIndex = index;\r\n\r\n        // Re-render testimonial with fade effect\r\n        if (this.contentContainer) {\r\n            this.contentContainer.style.opacity = '0';\r\n            this.contentContainer.style.transition = 'opacity 0.3s ease-in-out';\r\n\r\n            setTimeout(() => {\r\n                this.renderTestimonial();\r\n                this.renderIndicators();\r\n\r\n                if (this.contentContainer) {\r\n                    this.contentContainer.style.opacity = '1';\r\n                }\r\n            }, 150);\r\n        }\r\n\r\n        // Callback\r\n        if (this.onSlideChange) {\r\n            this.onSlideChange(index);\r\n        }\r\n    }\r\n\r\n    public next(): void {\r\n        this.goToSlide(this.currentIndex + 1);\r\n        // Pause autoplay temporarily when user interacts\r\n        if (this.isAutoPlayActive) {\r\n            this.stopAutoplay();\r\n            setTimeout(() => {\r\n                if (this.isAutoPlayActive) {\r\n                    this.startAutoplay();\r\n                }\r\n            }, 10000); // Resume after 10 seconds\r\n        }\r\n    }\r\n\r\n    public prev(): void {\r\n        this.goToSlide(this.currentIndex - 1);\r\n        // Pause autoplay temporarily when user interacts\r\n        if (this.isAutoPlayActive) {\r\n            this.stopAutoplay();\r\n            setTimeout(() => {\r\n                if (this.isAutoPlayActive) {\r\n                    this.startAutoplay();\r\n                }\r\n            }, 10000); // Resume after 10 seconds\r\n        }\r\n    }\r\n\r\n    public startAutoplay(): void {\r\n        this.stopAutoplay();\r\n        this.autoplayInterval = window.setInterval(() => {\r\n            this.next();\r\n        }, this.autoplaySpeed);\r\n    }\r\n\r\n    public stopAutoplay(): void {\r\n        if (this.autoplayInterval) {\r\n            clearInterval(this.autoplayInterval);\r\n            this.autoplayInterval = null;\r\n        }\r\n    }\r\n\r\n    public destroy(): void {\r\n        this.stopAutoplay();\r\n        // Remove event listeners would go here if we tracked them\r\n    }\r\n\r\n    public getCurrentIndex(): number {\r\n        return this.currentIndex;\r\n    }\r\n\r\n    public getTotalTestimonials(): number {\r\n        return this.testimonials.length;\r\n    }\r\n\r\n    public getTestimonials(): Testimonial[] {\r\n        return this.testimonials;\r\n    }\r\n\r\n    public setTestimonials(testimonials: Testimonial[]): void {\r\n        this.testimonials = testimonials;\r\n        this.currentIndex = 0;\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     * Get initials from name for avatar fallback\r\n     */\r\n    private getInitials(name: string): string {\r\n        const parts = name.trim().split(/\\s+/);\r\n        if (parts.length === 1) {\r\n            return parts[0]?.charAt(0).toUpperCase() ?? \"\";\r\n        }\r\n        const first = parts[0]?.charAt(0) ?? \"\";\r\n        const last = parts[parts.length - 1]?.charAt(0) ?? \"\";\r\n        return (first + last).toUpperCase();\r\n    }\r\n\r\n    /**\r\n     * Generate a consistent color based on name for avatar background\r\n     */\r\n    private getColorFromName(name: string): string {\r\n        let hash = 0;\r\n        for (let i = 0; i < name.length; i++) {\r\n            hash = name.charCodeAt(i) + ((hash << 5) - hash);\r\n        }\r\n        \r\n        const hue = hash % 360;\r\n        return `hsl(${hue}, 65%, 50%)`;\r\n    }\r\n\r\n    /**\r\n     * Format date to relative time (e.g., \"2 days ago\")\r\n     */\r\n    private formatRelativeDate(dateString: string): string {\r\n        try {\r\n            const date = new Date(dateString);\r\n            const now = new Date();\r\n            const diffMs = now.getTime() - date.getTime();\r\n            const diffSec = Math.floor(diffMs / 1000);\r\n            const diffMin = Math.floor(diffSec / 60);\r\n            const diffHour = Math.floor(diffMin / 60);\r\n            const diffDay = Math.floor(diffHour / 24);\r\n            const diffWeek = Math.floor(diffDay / 7);\r\n            const diffMonth = Math.floor(diffDay / 30);\r\n            const diffYear = Math.floor(diffDay / 365);\r\n\r\n            if (diffSec < 60) {\r\n                return \"just now\";\r\n            } else if (diffMin < 60) {\r\n                return `${diffMin} ${diffMin === 1 ? \"minute\" : \"minutes\"} ago`;\r\n            } else if (diffHour < 24) {\r\n                return `${diffHour} ${diffHour === 1 ? \"hour\" : \"hours\"} ago`;\r\n            } else if (diffDay < 7) {\r\n                return `${diffDay} ${diffDay === 1 ? \"day\" : \"days\"} ago`;\r\n            } else if (diffWeek < 4) {\r\n                return `${diffWeek} ${diffWeek === 1 ? \"week\" : \"weeks\"} ago`;\r\n            } else if (diffMonth < 12) {\r\n                return `${diffMonth} ${diffMonth === 1 ? \"month\" : \"months\"} ago`;\r\n            } else {\r\n                return `${diffYear} ${diffYear === 1 ? \"year\" : \"years\"} ago`;\r\n            }\r\n        } catch {\r\n            return dateString;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Tresta Widget - Main Class\r\n * Self-contained testimonial widget for CDN embedding\r\n */\r\n\r\nimport type {\r\n  WidgetConfig,\r\n  WidgetData,\r\n  ApiResponse,\r\n  Testimonial,\r\n  Widget,\r\n  WidgetSettings,\r\n} from \"./types.ts\";\r\nimport {\r\n  generateStyles,\r\n  injectStyles,\r\n  removeStyles,\r\n  DEFAULT_THEME,\r\n} from \"./styles.ts\";\r\nimport {\r\n  renderWidget,\r\n  renderLoading,\r\n  renderError,\r\n  renderBranding,\r\n} from \"./renderer.ts\";\r\nimport { Carousel } from \"./carousel.ts\";\r\nimport { detectHostTheme, prefersDarkMode } from \"./theme-detector.ts\";\r\n\r\nexport class TrestaWidget {\r\n  // Static methods for global widget management (implemented in index.ts)\r\n  static init: (\r\n    widgetId: string,\r\n    config?: Partial<WidgetConfig>,\r\n  ) => TrestaWidget = () => {\r\n    throw new Error('TrestaWidget.init not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  static destroy: (widgetId: string) => void = () => {\r\n    throw new Error('TrestaWidget.destroy not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  static refresh: (widgetId: string) => Promise<void> = async () => {\r\n    throw new Error('TrestaWidget.refresh not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  static refreshAll: () => Promise<void> = async () => {\r\n    throw new Error('TrestaWidget.refreshAll not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  static get: (widgetId: string) => TrestaWidget | null = () => {\r\n    throw new Error('TrestaWidget.get not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  static getAll: () => TrestaWidget[] = () => {\r\n    throw new Error('TrestaWidget.getAll not initialized. Make sure the widget script is loaded.');\r\n  };\r\n  private config: WidgetConfig;\r\n  private container: HTMLElement | null = null;\r\n  private widget: Widget | null = null;\r\n  private testimonials: Testimonial[] = [];\r\n  private carouselInterval: number | null = null;\r\n  private currentSlide: number = 0;\r\n  private effectiveLayout: string | null = null; // Store the effective layout being used\r\n\r\n  constructor(config: WidgetConfig) {\r\n    this.config = {\r\n      apiUrl: \"http://localhost:8000\",\r\n      ...config,\r\n    };\r\n\r\n    this.init();\r\n  }\r\n\r\n  /**\r\n   * Initialize the widget\r\n   */\r\n  private async init(): Promise<void> {\r\n    try {\r\n      console.log('[TrestaWidget] Init started with config:', this.config);\r\n      \r\n      // Find or create container\r\n      this.container = this.findContainer();\r\n      if (!this.container) {\r\n        throw new Error(\"Widget container not found\");\r\n      }\r\n\r\n      console.log('[TrestaWidget] Container found:', this.container);\r\n\r\n      // Show loading state\r\n      this.render(renderLoading());\r\n\r\n      // Fetch widget data (or use mock data for preview)\r\n      if (this.config.mockData) {\r\n        // Use mock data for preview mode\r\n        this.widget = this.config.mockData.widget;\r\n        this.testimonials = this.config.mockData.testimonials || [];\r\n        console.log('[TrestaWidget] Using mock data:', { widget: this.widget, testimonials: this.testimonials });\r\n      } else {\r\n        // Fetch from API\r\n        console.log('[TrestaWidget] Fetching from API...');\r\n        await this.fetchWidgetData();\r\n      }\r\n\r\n      console.log('[TrestaWidget] About to inject styles, widget is:', this.widget);\r\n\r\n      // Inject styles\r\n      this.injectWidgetStyles();\r\n\r\n      console.log('[TrestaWidget] About to render widget');\r\n\r\n      // Render widget\r\n      this.renderWidget();\r\n\r\n      console.log('[TrestaWidget] Widget rendered');\r\n\r\n      // Initialize carousel if needed (check config first, then widget.layout)\r\n      const layout = this.config.settings?.layout || this.widget?.layout;\r\n      console.log('[TrestaWidget] Layout is:', layout);\r\n      \r\n      if (layout === \"carousel\") {\r\n        console.log('[TrestaWidget] Initializing carousel');\r\n        this.initCarousel();\r\n      }\r\n\r\n      // Call onLoad callback\r\n      if (this.config.onLoad && this.widget) {\r\n        this.config.onLoad(this.widget);\r\n      }\r\n      \r\n      console.log('[TrestaWidget] Init complete');\r\n    } catch (error) {\r\n      console.error('[TrestaWidget] Init error:', error);\r\n      this.handleError(error as Error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Find the container element\r\n   */\r\n  private findContainer(): HTMLElement | null {\r\n    if (!this.config.container) {\r\n      // Auto-detect container from script tag\r\n      const scripts = document.querySelectorAll(\"script[data-tresta-widget]\");\r\n      const currentScript = Array.from(scripts).find(\r\n        (script) =>\r\n          script.getAttribute(\"data-tresta-widget\") === this.config.widgetId,\r\n      );\r\n\r\n      if (currentScript) {\r\n        const containerId = currentScript.getAttribute(\"data-container\");\r\n        if (containerId) {\r\n          return document.getElementById(containerId);\r\n        }\r\n\r\n        // Create container after script tag\r\n        const container = document.createElement(\"div\");\r\n        container.id = `tresta-widget-${this.config.widgetId}`;\r\n        container.className = `tresta-widget-${this.config.widgetId}`;\r\n        currentScript.parentNode?.insertBefore(\r\n          container,\r\n          currentScript.nextSibling,\r\n        );\r\n        return container;\r\n      }\r\n\r\n      // Fallback: create container in body\r\n      const container = document.createElement(\"div\");\r\n      container.id = `tresta-widget-${this.config.widgetId}`;\r\n      container.className = `tresta-widget-${this.config.widgetId}`;\r\n      document.body.appendChild(container);\r\n      return container;\r\n    }\r\n\r\n    if (typeof this.config.container === \"string\") {\r\n      return document.querySelector(this.config.container);\r\n    }\r\n\r\n    return this.config.container;\r\n  }\r\n\r\n  /**\r\n   * Fetch widget data from API\r\n   */\r\n  private async fetchWidgetData(): Promise<void> {\r\n    const url = `${this.config.apiUrl}/api/widgets/${this.config.widgetId}/public`;\r\n\r\n    const response = await fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `Failed to fetch widget data: ${response.status} ${response.statusText}`,\r\n      );\r\n    }\r\n\r\n    const result: ApiResponse<WidgetData> = await response.json();\r\n\r\n    if (!result.success || !result.data) {\r\n      throw new Error(result.error?.message || \"Failed to load widget data\");\r\n    }\r\n\r\n    this.widget = result.data.widget;\r\n    this.testimonials = result.data.testimonials || [];\r\n\r\n    // Debug logging\r\n    console.log('API Response:', {\r\n      widget: this.widget,\r\n      testimonials: this.testimonials,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Inject widget styles\r\n   */\r\n  private injectWidgetStyles(): void {\r\n    if (!this.widget || !this.container) return;\r\n\r\n    const theme = {\r\n      ...DEFAULT_THEME,\r\n      ...this.widget.theme,\r\n      ...this.config.theme,\r\n    };\r\n\r\n    const settings = {\r\n      ...this.widget.settings,\r\n      ...this.config.settings,\r\n    };\r\n\r\n    // Allow config to override layout\r\n    const layout = this.config.settings?.layout || this.widget.layout;\r\n\r\n    const css = generateStyles(theme, layout, this.config.widgetId, settings);\r\n    injectStyles(css, this.config.widgetId);\r\n  }\r\n\r\n  /**\r\n   * Render the widget content\r\n   */\r\n  private renderWidget(): void {\r\n    if (!this.widget || !this.container) return;\r\n\r\n    const settings: WidgetSettings = {\r\n      ...this.widget.settings,\r\n      ...this.config.settings,\r\n    };\r\n\r\n    // Allow config to override layout from database (useful for testing)\r\n    const layout = this.config.settings?.layout || this.widget.layout;\r\n    \r\n    // Store effective layout for use in render()\r\n    this.effectiveLayout = layout;\r\n\r\n    // Debug logging\r\n    console.log('Widget Settings:', {\r\n      fromAPI: this.widget.settings,\r\n      fromConfig: this.config.settings,\r\n      merged: settings,\r\n      layout: layout,\r\n    });\r\n\r\n    const widgetHtml = renderWidget(\r\n      this.testimonials,\r\n      layout,\r\n      settings,\r\n      this.config.widgetId,\r\n    );\r\n\r\n    // Check if branding should be shown (default true, can be disabled in premium)\r\n    const showBranding = true; // Always show branding for now\r\n    const brandingHtml = renderBranding(showBranding);\r\n\r\n    const fullHtml = `\r\n      <div class=\"tresta-widget-inner\">\r\n        ${widgetHtml}\r\n        ${brandingHtml}\r\n      </div>\r\n    `;\r\n\r\n    this.render(fullHtml);\r\n  }\r\n\r\n  /**\r\n   * Initialize carousel functionality\r\n   */\r\n  private initCarousel(): void {\r\n    if (!this.container || !this.widget) return;\r\n\r\n    // Allow config to override layout\r\n    const layout = this.config.settings?.layout || this.widget.layout;\r\n    \r\n    // Only initialize carousel if the layout is actually carousel\r\n    if (layout !== 'carousel') return;\r\n\r\n    const settings = this.widget.settings;\r\n\r\n    // Find carousel container\r\n    const carouselContainer = this.container.querySelector(\r\n      \".tresta-carousel\",\r\n    ) as HTMLElement;\r\n\r\n    if (!carouselContainer) return;\r\n\r\n    // Map testimonials to carousel format\r\n    const carouselTestimonials = this.testimonials.map(t => ({\r\n      id: t.id,\r\n      name: t.authorName || 'Anonymous',\r\n      role: t.authorRole || '',\r\n      company: t.authorCompany,\r\n      content: t.content,\r\n      avatar: t.authorAvatar,\r\n      rating: t.rating,\r\n      createdAt: t.createdAt,\r\n      isOAuthVerified: t.isOAuthVerified,\r\n      oauthProvider: t.oauthProvider,\r\n    }));\r\n\r\n    // Use enhanced Carousel class\r\n    const carousel = new Carousel({\r\n      container: carouselContainer,\r\n      testimonials: carouselTestimonials,\r\n      autoplay: settings.autoRotate ?? false,\r\n      autoplaySpeed: settings.rotateInterval ?? 5000,\r\n      showRating: settings.showRating ?? true,\r\n      showCompany: settings.showAuthorCompany ?? true,\r\n      showAvatar: settings.showAvatar ?? true,\r\n      showDate: settings.showDate ?? true,\r\n      showNavigation: settings.showNavigation ?? true, // Add navigation control\r\n      onSlideChange: (index) => {\r\n        this.currentSlide = index;\r\n      },\r\n    });\r\n\r\n    // Store carousel instance for cleanup\r\n    (this as any).carouselInstance = carousel;\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Render HTML content to container\r\n   */\r\n  private render(html: string): void {\r\n    if (!this.container) return;\r\n\r\n    this.container.innerHTML = html;\r\n\r\n    // Add layout class to container - use effective layout if available\r\n    if (this.widget) {\r\n      const layoutClass = this.effectiveLayout || this.widget.layout;\r\n      this.container.className = `tresta-widget-${this.config.widgetId} tresta-layout-${layoutClass}`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle errors\r\n   */\r\n  private handleError(error: Error): void {\r\n    console.error(\"Tresta Widget Error:\", error);\r\n\r\n    if (this.container) {\r\n      this.render(renderError(error.message));\r\n    }\r\n\r\n    if (this.config.onError) {\r\n      this.config.onError(error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy the widget and clean up\r\n   */\r\n  public destroy(): void {\r\n    // Destroy carousel instance if it exists\r\n    if ((this as any).carouselInstance) {\r\n      (this as any).carouselInstance.destroy();\r\n      (this as any).carouselInstance = null;\r\n    }\r\n\r\n    removeStyles(this.config.widgetId);\r\n\r\n    if (this.container) {\r\n      this.container.innerHTML = \"\";\r\n    }\r\n\r\n    this.widget = null;\r\n    this.testimonials = [];\r\n    this.container = null;\r\n  }\r\n\r\n  /**\r\n   * Refresh widget data\r\n   */\r\n  public async refresh(): Promise<void> {\r\n    try {\r\n      await this.fetchWidgetData();\r\n      this.renderWidget();\r\n\r\n      if (this.widget?.layout === \"carousel\") {\r\n        this.initCarousel();\r\n      }\r\n    } catch (error) {\r\n      this.handleError(error as Error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current widget data\r\n   */\r\n  public getWidget(): Widget | null {\r\n    return this.widget;\r\n  }\r\n\r\n  /**\r\n   * Get current testimonials\r\n   */\r\n  public getTestimonials(): Testimonial[] {\r\n    return this.testimonials;\r\n  }\r\n}\r\n","/**\r\n * Tresta Widget - Entry Point\r\n * Auto-initializes widgets from script tags with data-tresta-widget attribute\r\n */\r\n\r\nimport { TrestaWidget } from \"./widget.ts\";\r\nimport type { WidgetConfig } from \"./types.ts\";\r\n\r\n// Export main class and types for programmatic usage\r\nexport { TrestaWidget };\r\nexport type * from \"./types.ts\";\r\n\r\n// Global namespace for programmatic access\r\ndeclare global {\r\n  interface Window {\r\n    TrestaWidget: typeof TrestaWidget;\r\n    trestaWidgets: Map<string, TrestaWidget>;\r\n  }\r\n}\r\n\r\n// Initialize global namespace\r\nwindow.TrestaWidget = TrestaWidget;\r\nwindow.trestaWidgets = window.trestaWidgets || new Map();\r\n\r\n/**\r\n * Auto-initialize widgets from script tags\r\n */\r\nfunction autoInitialize(): void {\r\n  // Find all script tags with data-tresta-widget attribute\r\n  const scripts = document.querySelectorAll(\"script[data-tresta-widget]\");\r\n\r\n  scripts.forEach((script) => {\r\n    const widgetId = script.getAttribute(\"data-tresta-widget\");\r\n    if (!widgetId) return;\r\n\r\n    // Skip if already initialized\r\n    if (window.trestaWidgets.has(widgetId)) return;\r\n\r\n    // Read configuration from data attributes\r\n    const config: WidgetConfig = {\r\n      widgetId,\r\n      apiUrl: script.getAttribute(\"data-api-url\") || undefined,\r\n      container: script.getAttribute(\"data-container\") || undefined,\r\n    };\r\n\r\n    // Parse theme overrides\r\n    const primaryColor = script.getAttribute(\"data-primary-color\");\r\n    const backgroundColor = script.getAttribute(\"data-background-color\");\r\n    const textColor = script.getAttribute(\"data-text-color\");\r\n    const cardBackgroundColor = script.getAttribute(\r\n      \"data-card-background-color\",\r\n    );\r\n    const borderRadius = script.getAttribute(\"data-border-radius\");\r\n    const fontFamily = script.getAttribute(\"data-font-family\");\r\n\r\n    if (\r\n      primaryColor ||\r\n      backgroundColor ||\r\n      textColor ||\r\n      cardBackgroundColor ||\r\n      borderRadius ||\r\n      fontFamily\r\n    ) {\r\n      config.theme = {\r\n        ...(primaryColor && { primaryColor }),\r\n        ...(backgroundColor && { backgroundColor }),\r\n        ...(textColor && { textColor }),\r\n        ...(cardBackgroundColor && { cardBackgroundColor }),\r\n        ...(borderRadius && { borderRadius: parseInt(borderRadius, 10) }),\r\n        ...(fontFamily && { fontFamily }),\r\n      };\r\n    }\r\n\r\n    // Parse settings overrides\r\n    const showRating = script.getAttribute(\"data-show-rating\");\r\n    const showDate = script.getAttribute(\"data-show-date\");\r\n    const showAuthorImage = script.getAttribute(\"data-show-author-image\");\r\n    const showAuthorRole = script.getAttribute(\"data-show-author-role\");\r\n    const showAuthorCompany = script.getAttribute(\"data-show-author-company\");\r\n    const autoplay = script.getAttribute(\"data-autoplay\");\r\n    const autoplaySpeed = script.getAttribute(\"data-autoplay-speed\");\r\n    const maxItems = script.getAttribute(\"data-max-items\");\r\n\r\n    if (\r\n      showRating ||\r\n      showDate ||\r\n      showAuthorImage ||\r\n      showAuthorRole ||\r\n      showAuthorCompany ||\r\n      autoplay ||\r\n      autoplaySpeed ||\r\n      maxItems\r\n    ) {\r\n      config.settings = {\r\n        ...(showRating && { showRating: showRating === \"true\" }),\r\n        ...(showDate && { showDate: showDate === \"true\" }),\r\n        ...(showAuthorImage && { showAuthorImage: showAuthorImage === \"true\" }),\r\n        ...(showAuthorRole && { showAuthorRole: showAuthorRole === \"true\" }),\r\n        ...(showAuthorCompany && {\r\n          showAuthorCompany: showAuthorCompany === \"true\",\r\n        }),\r\n        ...(autoplay && { autoplay: autoplay === \"true\" }),\r\n        ...(autoplaySpeed && { autoplaySpeed: parseInt(autoplaySpeed, 10) }),\r\n        ...(maxItems && { maxItems: parseInt(maxItems, 10) }),\r\n      };\r\n    }\r\n\r\n    // Initialize widget\r\n    try {\r\n      const widget = new TrestaWidget(config);\r\n      window.trestaWidgets.set(widgetId, widget);\r\n    } catch (error) {\r\n      console.error(`Failed to initialize Tresta widget ${widgetId}:`, error);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Initialize when DOM is ready\r\n */\r\nif (document.readyState === \"loading\") {\r\n  document.addEventListener(\"DOMContentLoaded\", autoInitialize);\r\n} else {\r\n  // DOM already loaded\r\n  autoInitialize();\r\n}\r\n\r\n/**\r\n * Expose helper functions for manual widget management\r\n */\r\n// Assign static methods to TrestaWidget class\r\nTrestaWidget.init = (widgetId: string, config?: Partial<WidgetConfig>) => {\r\n  const fullConfig: WidgetConfig = {\r\n    widgetId,\r\n    ...config,\r\n  };\r\n\r\n  const widget = new TrestaWidget(fullConfig);\r\n  window.trestaWidgets.set(widgetId, widget);\r\n  return widget;\r\n};\r\n\r\nTrestaWidget.destroy = (widgetId: string) => {\r\n  const widget = window.trestaWidgets.get(widgetId);\r\n  if (widget) {\r\n    widget.destroy();\r\n    window.trestaWidgets.delete(widgetId);\r\n  }\r\n};\r\n\r\nTrestaWidget.refresh = async (widgetId: string) => {\r\n  const widget = window.trestaWidgets.get(widgetId);\r\n  if (widget) {\r\n    await widget.refresh();\r\n  }\r\n};\r\n\r\nTrestaWidget.refreshAll = async () => {\r\n  const promises = Array.from(window.trestaWidgets.values()).map((widget) =>\r\n    widget.refresh(),\r\n  );\r\n  await Promise.all(promises);\r\n};\r\n\r\nTrestaWidget.get = (widgetId: string) => {\r\n  return window.trestaWidgets.get(widgetId) || null;\r\n};\r\n\r\nTrestaWidget.getAll = () => {\r\n  return Array.from(window.trestaWidgets.values());\r\n};\r\n\r\n// Ensure TrestaWidget is properly exposed globally for IIFE builds\r\nif (typeof window !== 'undefined') {\r\n  (window as any).TrestaWidget = TrestaWidget;\r\n}\r\n"],"names":["container"],"mappings":";;;;;AAUO,QAAM,gBAA6B;AAAA,IACxC,cAAc;AAAA,IACd,iBAAiB;AAAA,IACjB,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,cAAc;AAAA,IACd,YACE;AAAA,IACF,WAAW;AAAA;AAAA,EACb;AAKO,WAAS,eACd,OACA,SACA,UACA,UACQ;AACR,UAAM,IAAI,EAAE,GAAG,eAAe,GAAG,MAAA;AACjC,UAAM,SAAS,kBAAkB,QAAQ;AACzC,UAAM,MAAM,UAAU,OAAO;AAC7B,UAAM,UAAU,UAAU,WAAW;AAErC,WAAO;AAAA;AAAA,MAEH,MAAM;AAAA,qBACS,EAAE,UAAU;AAAA,eAClB,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQpB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,eAKG,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA,MAIvB,MAAM;AAAA;AAAA;AAAA,0BAGc,EAAE,mBAAmB;AAAA,0BACrB,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUlC,MAAM;AAAA;AAAA;AAAA;AAAA,uBAIW,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,MAK/B,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA,0BACc,EAAE,mBAAmB;AAAA;AAAA,uBAExB,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAU/B,MAAM;AAAA;AAAA,sBAEU,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA,MAI9B,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAQG,EAAE,SAAS;AAAA,cACZ,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAKnB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA,eAGG,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWpB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMc,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUlC,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA,eAGG,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUpB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAYN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA,aAGC,GAAG;AAAA;AAAA;AAAA;AAAA,MAIV,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAOJ,MAAM;AAAA,wCAC0B,KAAK,IAAI,SAAS,CAAC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,QAKpD,MAAM;AAAA,wCAC0B,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,QAKvC,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMR,MAAM;AAAA;AAAA,oBAEQ,GAAG;AAAA;AAAA;AAAA,MAGjB,MAAM;AAAA;AAAA,uBAEW,GAAG;AAAA;AAAA;AAAA;AAAA,QAIlB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMR,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA;AAAA,MAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASJ,MAAM;AAAA;AAAA;AAAA;AAAA,QAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKR,MAAM;AAAA,0BACc,EAAE,mBAAmB;AAAA;AAAA,uBAExB,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAY7B,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMR,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA,eACG,EAAE,SAAS;AAAA;AAAA;AAAA,MAGpB,MAAM;AAAA;AAAA;AAAA;AAAA,MAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQN,MAAM;AAAA;AAAA;AAAA,eAGG,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QASlB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKR,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA,eAGG,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOpB,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQN,MAAM;AAAA,0BACc,EAAE,mBAAmB;AAAA,eAChC,EAAE,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAgBpB,MAAM;AAAA;AAAA;AAAA,0BAGc,EAAE,YAAY;AAAA;AAAA,sBAElB,EAAE,YAAY;AAAA;AAAA;AAAA,MAG9B,MAAM;AAAA;AAAA,8BAEkB,EAAE,YAAY;AAAA;AAAA;AAAA,MAGtC,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQN,MAAM;AAAA;AAAA;AAAA;AAAA,0BAIc,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOlC,MAAM;AAAA,0BACc,EAAE,YAAY;AAAA;AAAA;AAAA,MAGlC,MAAM;AAAA;AAAA,0BAEc,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA,MAIlC,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAaN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAUN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAON,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA,MAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMN,MAAM;AAAA;AAAA;AAAA;AAAA,MAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA,MAKN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAiBJ,MAAM;AAAA;AAAA;AAAA;AAAA,QAIN,MAAM;AAAA;AAAA;AAAA;AAAA,QAIN,MAAM;AAAA;AAAA;AAAA;AAAA,QAIN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQR,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MASN,MAAM;AAAA,eACG,EAAE,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,MAKvB,MAAM;AAAA;AAAA;AAAA;AAAA,EAIZ;AAKO,WAAS,aAAa,KAAa,UAAwB;AAChE,UAAM,UAAU,wBAAwB,QAAQ;AAGhD,UAAM,gBAAgB,SAAS,eAAe,OAAO;AACrD,QAAI,eAAe;AACjB,oBAAc,OAAA;AAAA,IAChB;AAGA,UAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,UAAM,KAAK;AACX,UAAM,cAAc;AACpB,aAAS,KAAK,YAAY,KAAK;AAAA,EACjC;AAKO,WAAS,aAAa,UAAwB;AACnD,UAAM,UAAU,wBAAwB,QAAQ;AAChD,UAAM,QAAQ,SAAS,eAAe,OAAO;AAC7C,QAAI,OAAO;AACT,YAAM,OAAA;AAAA,IACR;AAAA,EACF;AC1qBO,WAAS,kBACd,aACA,UACQ;AACR,UAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACE;AAGJ,UAAM,aAAa,aACf;AAAA,WACK,MAAM,KAAK,EAAE,QAAQ,EAAA,CAAG,EACvB;AAAA,MAAI,CAAC,GAAG,MACP,KAAK,YAAY,UAAU,KACvB,0eACA;AAAA,IAAA,EAEL,KAAK,EAAE,CAAC;AAAA,iBAEd;AAGJ,QAAI,kBAAkB;AACtB,QAAI,YAAY;AACd,UAAI,YAAY,cAAc;AAC5B,0BAAkB,aAAa,WAAW,YAAY,YAAY,CAAC,UAAU,WAAW,YAAY,UAAU,CAAC;AAAA,MACjH,OAAO;AACL,cAAM,WAAW,YAAY,YAAY,UAAU;AACnD,cAAM,kBAAkB,iBAAiB,YAAY,UAAU;AAC/D,0BAAkB,oFAAoF,eAAe,KAAK,QAAQ;AAAA,MACpI;AAAA,IACF;AAGA,QAAI,iBAAiB;AACrB,QAAI,kBAAkB,YAAY,YAAY;AAC5C,uBAAiB,iCAAiC,WAAW,YAAY,UAAU,CAAC,GAClF,qBAAqB,YAAY,gBAC7B,2CAA2C,WAAW,YAAY,aAAa,CAAC,YAChF,EACN;AAAA,IACF,WAAW,qBAAqB,YAAY,eAAe;AACzD,uBAAiB,qEAAqE,WAAW,YAAY,aAAa,CAAC;AAAA,IAC7H;AAGA,UAAM,oBAAoB,YAAY,kBAClC,2DAA2D,YAAY,iBAAiB,OAAO;AAAA;AAAA,iBAG/F;AAGJ,UAAM,WAAW,WACb,4BAA4B,WAAW,YAAY,SAAS,CAAC,WAC7D;AAEJ,WAAO;AAAA,0EACiE,YAAY,EAAE;AAAA,QAChF,UAAU;AAAA,qCACmB,WAAW,YAAY,OAAO,CAAC;AAAA;AAAA,UAE1D,eAAe;AAAA;AAAA;AAAA,cAGX,WAAW,YAAY,UAAU,CAAC;AAAA,cAClC,iBAAiB;AAAA;AAAA,YAEnB,cAAc;AAAA;AAAA;AAAA,QAGlB,QAAQ;AAAA;AAAA;AAAA,EAGhB;AAKO,WAAS,iBACd,cACA,UACQ;AACR,UAAM,QAAQ,aACX,IAAI,CAAC,MAAM,kBAAkB,GAAG,QAAQ,CAAC,EACzC,KAAK,EAAE;AAEV,WAAO,oCAAoC,KAAK;AAAA,EAClD;AAKO,WAAS,iBACd,cACA,UACQ;AACR,UAAM,QAAQ,aACX,IAAI,CAAC,MAAM,kBAAkB,GAAG,QAAQ,CAAC,EACzC,KAAK,EAAE;AAEV,WAAO,oCAAoC,KAAK;AAAA,EAClD;AAKO,WAAS,oBACd,cACA,UACQ;AACR,UAAM,QAAQ,aACX,IAAI,CAAC,MAAM,kBAAkB,GAAG,QAAQ,CAAC,EACzC,KAAK,EAAE;AAEV,WAAO,oCAAoC,KAAK;AAAA,EAClD;AAMO,WAAS,qBACd,cACA,UACA,UACQ;AAER,WAAO,gDAAgD,QAAQ;AAAA,EACjE;AAKO,WAAS,iBACd,cACA,UACQ;AACR,UAAM,QAAQ,aACX,IAAI,CAAC,MAAM,kBAAkB,GAAG,QAAQ,CAAC,EACzC,KAAK,EAAE;AAEV,WAAO,oCAAoC,KAAK;AAAA,EAClD;AAKO,WAAS,aACd,cACA,QACA,UACA,UACQ;AACR,QAAI,CAAC,gBAAgB,aAAa,WAAW,GAAG;AAC9C,aAAO;AAAA,IACT;AAGA,UAAM,sBAAsB,SAAS,kBACjC,aAAa,MAAM,GAAG,SAAS,eAAe,IAC9C;AAEJ,YAAQ,QAAA;AAAA,MACN,KAAK;AACH,eAAO,qBAAqB,qBAAqB,UAAU,QAAQ;AAAA,MACrE,KAAK;AACH,eAAO,iBAAiB,qBAAqB,QAAQ;AAAA,MACvD,KAAK;AACH,eAAO,oBAAoB,qBAAqB,QAAQ;AAAA,MAC1D,KAAK;AACH,eAAO,iBAAiB,qBAAqB,QAAQ;AAAA,MACvD,KAAK;AAAA,MACL;AACE,eAAO,iBAAiB,qBAAqB,QAAQ;AAAA,IAAA;AAAA,EAE3D;AAKO,WAAS,gBAAwB;AACtC,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKT;AAKO,WAAS,YAAY,SAAyB;AACnD,WAAO;AAAA;AAAA;AAAA,WAGE,WAAW,OAAO,CAAC;AAAA;AAAA;AAAA,EAG9B;AAKO,WAAS,eAAe,cAA+B;AAG5D,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKT;AAOA,WAAS,WAAW,QAAwB;AAC1C,WAAO,OACJ,QAAQ,MAAM,OAAO,EACrB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,MAAM,EACpB,QAAQ,MAAM,QAAQ,EACtB,QAAQ,MAAM,QAAQ;AAAA,EAC3B;AAKA,WAAS,YAAY,MAAsB;AACzC,UAAM,QAAQ,KAAK,KAAA,EAAO,MAAM,KAAK;AACrC,QAAI,MAAM,WAAW,GAAG;AACtB,aAAO,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,iBAAiB;AAAA,IAC9C;AACA,UAAM,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK;AACrC,UAAM,OAAO,MAAM,MAAM,SAAS,CAAC,GAAG,OAAO,CAAC,KAAK;AACnD,YAAQ,QAAQ,MAAM,YAAA;AAAA,EACxB;AAMA,WAAS,iBAAiB,MAAsB;AAC9C,QAAI,OAAO;AACX,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,aAAO,KAAK,WAAW,CAAC,MAAM,QAAQ,KAAK;AAAA,IAC7C;AAEA,UAAM,MAAM,OAAO;AACnB,WAAO,OAAO,GAAG;AAAA,EACnB;AAKA,WAAS,WAAW,YAA4B;AAC9C,QAAI;AACF,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,0BAAU,KAAA;AAChB,YAAM,SAAS,IAAI,QAAA,IAAY,KAAK,QAAA;AACpC,YAAM,UAAU,KAAK,MAAM,SAAS,GAAI;AACxC,YAAM,UAAU,KAAK,MAAM,UAAU,EAAE;AACvC,YAAM,WAAW,KAAK,MAAM,UAAU,EAAE;AACxC,YAAM,UAAU,KAAK,MAAM,WAAW,EAAE;AACxC,YAAM,WAAW,KAAK,MAAM,UAAU,CAAC;AACvC,YAAM,YAAY,KAAK,MAAM,UAAU,EAAE;AACzC,YAAM,WAAW,KAAK,MAAM,UAAU,GAAG;AAEzC,UAAI,UAAU,IAAI;AAChB,eAAO;AAAA,MACT,WAAW,UAAU,IAAI;AACvB,eAAO,GAAG,OAAO,IAAI,YAAY,IAAI,WAAW,SAAS;AAAA,MAC3D,WAAW,WAAW,IAAI;AACxB,eAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,MACzD,WAAW,UAAU,GAAG;AACtB,eAAO,GAAG,OAAO,IAAI,YAAY,IAAI,QAAQ,MAAM;AAAA,MACrD,WAAW,WAAW,GAAG;AACvB,eAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,MACzD,WAAW,YAAY,IAAI;AACzB,eAAO,GAAG,SAAS,IAAI,cAAc,IAAI,UAAU,QAAQ;AAAA,MAC7D,OAAO;AACL,eAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,MACzD;AAAA,IACF,QAAQ;AACN,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EC/QO,MAAM,SAAS;AAAA,IA4BlB,YAAY,SAA0B;AA3B9B;AACA;AACA,0CAAuB;AACvB,8CAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA,yCAAsB;AACtB,uCAAoB;AACpB,wCAAsB;AAGtB;AAAA,0CAAmC;AACnC,8CAAuC;AACvC,wCAAiC;AACjC,wCAAiC;AACjC,iDAA0C;AAC1C,4CAAqC;AAGzC,WAAK,YAAY,QAAQ;AACzB,WAAK,eAAe,QAAQ;AAC5B,WAAK,WAAW,QAAQ,YAAY;AACpC,WAAK,gBAAgB,QAAQ,iBAAiB;AAC9C,WAAK,aAAa,QAAQ,cAAc;AACxC,WAAK,cAAc,QAAQ,eAAe;AAC1C,WAAK,aAAa,QAAQ,cAAc;AACxC,WAAK,WAAW,QAAQ,YAAY;AACpC,WAAK,iBAAiB,QAAQ,kBAAkB;AAChD,WAAK,gBAAgB,QAAQ;AAC7B,WAAK,mBAAmB,KAAK;AAE7B,WAAK,KAAA;AAAA,IACT;AAAA,IAEQ,OAAa;AACjB,UAAI,CAAC,KAAK,aAAa,QAAQ;AAC3B,aAAK,iBAAA;AACL;AAAA,MACJ;AAEA,WAAK,OAAA;AACL,WAAK,cAAA;AACL,WAAK,kBAAA;AACL,WAAK,wBAAA;AAEL,UAAI,KAAK,UAAU;AACf,aAAK,cAAA;AACL,aAAK,mBAAA;AAAA,MACT;AAAA,IACJ;AAAA,IAEQ,mBAAyB;AAC7B,WAAK,UAAU,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,IAK/B;AAAA,IAEQ,SAAe;AAEnB,WAAK,UAAU,YAAY;AAC3B,WAAK,UAAU,YAAY;AAG3B,YAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,cAAQ,YAAY;AAGpB,UAAI,KAAK,gBAAgB;AACrB,aAAK,aAAa,KAAK,uBAAuB,QAAQ,sBAAsB;AAC5E,gBAAQ,YAAY,KAAK,UAAU;AAAA,MACvC;AAGA,WAAK,eAAe,SAAS,cAAc,KAAK;AAChD,WAAK,aAAa,YAAY;AAG9B,WAAK,mBAAmB,SAAS,cAAc,KAAK;AACpD,WAAK,iBAAiB,YAAY;AAElC,WAAK,aAAa,YAAY,KAAK,gBAAgB;AACnD,cAAQ,YAAY,KAAK,YAAY;AAGrC,UAAI,KAAK,gBAAgB;AACrB,aAAK,aAAa,KAAK,uBAAuB,QAAQ,kBAAkB;AACxE,gBAAQ,YAAY,KAAK,UAAU;AAAA,MACvC;AAEA,WAAK,UAAU,YAAY,OAAO;AAGlC,WAAK,sBAAsB,SAAS,cAAc,KAAK;AACvD,WAAK,oBAAoB,YAAY;AACrC,WAAK,UAAU,YAAY,KAAK,mBAAmB;AAGnD,YAAM,oBAAoB,SAAS,cAAc,KAAK;AACtD,wBAAkB,YAAY;AAC9B,WAAK,iBAAiB,SAAS,cAAc,QAAQ;AACrD,WAAK,eAAe,YAAY;AAChC,wBAAkB,YAAY,KAAK,cAAc;AACjD,WAAK,UAAU,YAAY,iBAAiB;AAG5C,WAAK,iBAAA;AAGL,WAAK,kBAAA;AAAA,IACT;AAAA,IAEQ,uBAAuB,WAA4B,OAA4B;AACnF,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,aAAa,eAAe,SAAS;AAC5C,aAAO,aAAa,cAAc,KAAK;AACvC,aAAO,YAAY,kDAAkD,SAAS;AAG9E,YAAM,MAAM,SAAS,gBAAgB,8BAA8B,KAAK;AACxE,UAAI,aAAa,SAAS,IAAI;AAC9B,UAAI,aAAa,UAAU,IAAI;AAC/B,UAAI,aAAa,WAAW,WAAW;AACvC,UAAI,aAAa,QAAQ,MAAM;AAC/B,UAAI,aAAa,UAAU,cAAc;AACzC,UAAI,aAAa,gBAAgB,KAAK;AACtC,UAAI,aAAa,kBAAkB,OAAO;AAC1C,UAAI,aAAa,mBAAmB,OAAO;AAE3C,YAAM,OAAO,SAAS,gBAAgB,8BAA8B,MAAM;AAE1E,UAAI,cAAc,QAAQ;AACtB,aAAK,aAAa,KAAK,iBAAiB;AAAA,MAC5C,OAAO;AACH,aAAK,aAAa,KAAK,eAAe;AAAA,MAC1C;AAEA,UAAI,YAAY,IAAI;AACpB,aAAO,YAAY,GAAG;AAEtB,aAAO;AAAA,IACX;AAAA,IAEQ,mBAAyB;AAC7B,UAAI,CAAC,KAAK,oBAAqB;AAE/B,WAAK,oBAAoB,YAAY;AAErC,WAAK,aAAa,QAAQ,CAAC,GAAG,UAAU;AACpC,cAAM,YAAY,SAAS,cAAc,QAAQ;AACjD,kBAAU,aAAa,cAAc,qBAAqB,QAAQ,CAAC,EAAE;AACrE,kBAAU,aAAa,cAAc,OAAO,KAAK,CAAC;AAClD,kBAAU,YAAY,UAAU,KAAK,eAC/B,+DACA;AAEN,YAAI,UAAU,KAAK,cAAc;AAC7B,oBAAU,aAAa,gBAAgB,MAAM;AAAA,QACjD;AAEA,YAAI,KAAK,qBAAqB;AAC1B,eAAK,oBAAoB,YAAY,SAAS;AAAA,QAClD;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,IAEQ,oBAA0B;AAC9B,UAAI,CAAC,KAAK,iBAAkB;AAE5B,YAAM,cAAc,KAAK,aAAa,KAAK,YAAY;AACvD,UAAI,CAAC,YAAa;AAElB,WAAK,iBAAiB,YAAY;AAGlC,UAAI,KAAK,cAAc,YAAY,QAAQ;AACvC,cAAM,kBAAkB,SAAS,cAAc,KAAK;AACpD,wBAAgB,YAAY;AAE5B,iBAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,gBAAM,OAAO,KAAK,eAAe,IAAI,YAAY,MAAM;AACvD,0BAAgB,YAAY,IAAI;AAAA,QACpC;AAEA,aAAK,iBAAiB,YAAY,eAAe;AAAA,MACrD;AAGA,YAAM,iBAAiB,SAAS,cAAc,KAAK;AACnD,qBAAe,YAAY;AAE3B,YAAM,aAAa,SAAS,cAAc,YAAY;AACtD,iBAAW,YAAY;AACvB,iBAAW,cAAc,IAAI,YAAY,OAAO;AAEhD,qBAAe,YAAY,UAAU;AACrC,WAAK,iBAAiB,YAAY,cAAc;AAGhD,YAAM,kBAAkB,SAAS,cAAc,KAAK;AACpD,sBAAgB,YAAY;AAG5B,UAAI,KAAK,YAAY;AACjB,YAAI;AAEJ,YAAI,YAAY,QAAQ;AAEpB,0BAAgB,SAAS,cAAc,KAAK;AAC5C,wBAAc,YAAY;AACzB,wBAAmC,MAAM,YAAY;AACrD,wBAAmC,MAAM,YAAY;AAAA,QAC1D,OAAO;AAEH,0BAAgB,SAAS,cAAc,KAAK;AAC5C,wBAAc,YAAY;AAC1B,gBAAM,WAAW,KAAK,YAAY,YAAY,IAAI;AAClD,gBAAM,kBAAkB,KAAK,iBAAiB,YAAY,IAAI;AAC9D,wBAAc,MAAM,kBAAkB;AACtC,wBAAc,MAAM,QAAQ;AAC5B,wBAAc,MAAM,UAAU;AAC9B,wBAAc,MAAM,aAAa;AACjC,wBAAc,MAAM,iBAAiB;AACrC,wBAAc,MAAM,aAAa;AACjC,wBAAc,MAAM,WAAW;AAC/B,wBAAc,cAAc;AAAA,QAChC;AAEA,wBAAgB,YAAY,aAAa;AAAA,MAC7C;AAEA,YAAM,aAAa,SAAS,cAAc,KAAK;AAC/C,iBAAW,YAAY;AAEvB,YAAM,gBAAgB,SAAS,cAAc,GAAG;AAChD,oBAAc,YAAY;AAC1B,oBAAc,cAAc,YAAY;AAGxC,UAAI,YAAY,iBAAiB;AAC7B,cAAM,QAAQ,SAAS,cAAc,MAAM;AAC3C,cAAM,YAAY;AAClB,cAAM,QAAQ,gBAAgB,YAAY,iBAAiB,OAAO;AAClE,cAAM,YAAY;AAAA;AAAA;AAAA;AAIlB,sBAAc,YAAY,KAAK;AAAA,MACnC;AAEA,iBAAW,YAAY,aAAa;AAEpC,YAAM,OAAO,SAAS,cAAc,GAAG;AACvC,WAAK,YAAY;AACjB,UAAI,WAAW,YAAY;AAC3B,UAAI,KAAK,eAAe,YAAY,SAAS;AACzC,oBAAY,OAAO,YAAY,OAAO;AAAA,MAC1C;AACA,WAAK,cAAc;AACnB,iBAAW,YAAY,IAAI;AAE3B,sBAAgB,YAAY,UAAU;AACtC,WAAK,iBAAiB,YAAY,eAAe;AAGjD,UAAI,KAAK,UAAU;AACf,cAAM,cAAc,SAAS,cAAc,KAAK;AAChD,oBAAY,YAAY;AACxB,oBAAY,cAAc,KAAK,mBAAmB,YAAY,SAAS;AACvE,aAAK,iBAAiB,YAAY,WAAW;AAAA,MACjD;AAGA,WAAK,qBAAA;AAAA,IACT;AAAA,IAEQ,eAAe,QAA6B;AAChD,YAAM,MAAM,SAAS,gBAAgB,8BAA8B,KAAK;AACxE,UAAI,aAAa,SAAS,IAAI;AAC9B,UAAI,aAAa,UAAU,IAAI;AAC/B,UAAI,aAAa,WAAW,WAAW;AACvC,UAAI,aAAa,QAAQ,SAAS,iBAAiB,MAAM;AACzD,UAAI,aAAa,UAAU,SAAS,iBAAiB,cAAc;AACnE,UAAI,aAAa,gBAAgB,KAAK;AACtC,UAAI,aAAa,kBAAkB,OAAO;AAC1C,UAAI,aAAa,mBAAmB,OAAO;AAC3C,UAAI,aAAa,SAAS,SAAS,gCAAgC,4BAA4B;AAG/F,YAAM,OAAO,SAAS,gBAAgB,8BAA8B,MAAM;AAC1E,WAAK,aAAa,KAAK,8FAA8F;AAErH,UAAI,YAAY,IAAI;AACpB,aAAO;AAAA,IACX;AAAA,IAEQ,uBAA6B;AACjC,UAAI,CAAC,KAAK,eAAgB;AAG1B,WAAK,eAAe,YAAY;AAGhC,YAAM,MAAM,SAAS,gBAAgB,8BAA8B,KAAK;AACxE,UAAI,aAAa,SAAS,IAAI;AAC9B,UAAI,aAAa,UAAU,IAAI;AAC/B,UAAI,aAAa,WAAW,WAAW;AACvC,UAAI,aAAa,QAAQ,cAAc;AACvC,UAAI,aAAa,UAAU,MAAM;AACjC,UAAI,MAAM,cAAc;AAExB,UAAI,KAAK,kBAAkB;AAEvB,cAAM,QAAQ,SAAS,gBAAgB,8BAA8B,MAAM;AAC3E,cAAM,aAAa,KAAK,GAAG;AAC3B,cAAM,aAAa,KAAK,GAAG;AAC3B,cAAM,aAAa,SAAS,GAAG;AAC/B,cAAM,aAAa,UAAU,IAAI;AACjC,cAAM,aAAa,MAAM,GAAG;AAE5B,cAAM,QAAQ,SAAS,gBAAgB,8BAA8B,MAAM;AAC3E,cAAM,aAAa,KAAK,IAAI;AAC5B,cAAM,aAAa,KAAK,GAAG;AAC3B,cAAM,aAAa,SAAS,GAAG;AAC/B,cAAM,aAAa,UAAU,IAAI;AACjC,cAAM,aAAa,MAAM,GAAG;AAE5B,YAAI,YAAY,KAAK;AACrB,YAAI,YAAY,KAAK;AAAA,MACzB,OAAO;AAEH,cAAM,OAAO,SAAS,gBAAgB,8BAA8B,MAAM;AAC1E,aAAK,aAAa,KAAK,eAAe;AACtC,YAAI,YAAY,IAAI;AAAA,MACxB;AAEA,WAAK,eAAe,YAAY,GAAG;AAGnC,YAAM,OAAO,SAAS,eAAe,KAAK,mBAAmB,UAAU,MAAM;AAC7E,WAAK,eAAe,YAAY,IAAI;AAAA,IACxC;AAAA,IAEQ,gBAAsB;AAC1B,WAAK,YAAY,iBAAiB,SAAS,MAAM,KAAK,MAAM;AAC5D,WAAK,YAAY,iBAAiB,SAAS,MAAM,KAAK,MAAM;AAG5D,UAAI,KAAK,qBAAqB;AAC1B,aAAK,oBAAoB,iBAAiB,SAAS,CAAC,MAAM;AACtD,gBAAM,SAAS,EAAE;AACjB,gBAAM,QAAQ,OAAO,aAAa,YAAY;AAC9C,cAAI,UAAU,MAAM;AAChB,iBAAK,UAAU,SAAS,OAAO,EAAE,CAAC;AAAA,UACtC;AAAA,QACJ,CAAC;AAAA,MACL;AAGA,WAAK,gBAAgB,iBAAiB,SAAS,MAAM;AACjD,aAAK,mBAAmB,CAAC,KAAK;AAC9B,YAAI,KAAK,kBAAkB;AACvB,eAAK,cAAA;AAAA,QACT,OAAO;AACH,eAAK,aAAA;AAAA,QACT;AACA,aAAK,qBAAA;AAAA,MACT,CAAC;AAAA,IACL;AAAA,IAEQ,oBAA0B;AAC9B,UAAI,CAAC,KAAK,aAAc;AAExB,WAAK,aAAa,iBAAiB,cAAc,CAAC,MAAM;AACpD,cAAM,QAAQ,EAAE,QAAQ,CAAC;AACzB,YAAI,OAAO;AACP,eAAK,cAAc,MAAM;AACzB,eAAK,aAAa;AAAA,QACtB;AAAA,MACJ,GAAG,EAAE,SAAS,MAAM;AAEpB,WAAK,aAAa,iBAAiB,aAAa,CAAC,MAAM;AACnD,YAAI,CAAC,KAAK,WAAY;AACtB,cAAM,QAAQ,EAAE,QAAQ,CAAC;AACzB,YAAI,OAAO;AACP,eAAK,YAAY,MAAM;AAAA,QAC3B;AAAA,MACJ,GAAG,EAAE,SAAS,MAAM;AAEpB,WAAK,aAAa,iBAAiB,YAAY,MAAM;AACjD,YAAI,CAAC,KAAK,WAAY;AACtB,aAAK,aAAa;AAElB,cAAM,OAAO,KAAK,cAAc,KAAK;AACrC,cAAM,YAAY;AAElB,YAAI,KAAK,IAAI,IAAI,IAAI,WAAW;AAC5B,cAAI,OAAO,GAAG;AACV,iBAAK,KAAA;AAAA,UACT,OAAO;AACH,iBAAK,KAAA;AAAA,UACT;AAAA,QACJ;AAAA,MACJ,CAAC;AAGD,UAAI,cAAc;AAClB,UAAI,kBAAkB;AAEtB,WAAK,aAAa,iBAAiB,aAAa,CAAC,MAAM;AACnD,sBAAc,EAAE;AAChB,0BAAkB;AAClB,YAAI,KAAK,cAAc;AACnB,eAAK,aAAa,MAAM,SAAS;AAAA,QACrC;AAAA,MACJ,CAAC;AAED,eAAS,iBAAiB,aAAa,CAAC,MAAM;AAC1C,YAAI,CAAC,mBAAmB,CAAC,KAAK,aAAc;AAAA,MAEhD,CAAC;AAED,eAAS,iBAAiB,WAAW,CAAC,MAAM;AACxC,YAAI,CAAC,mBAAmB,CAAC,KAAK,aAAc;AAC5C,0BAAkB;AAClB,YAAI,KAAK,cAAc;AACnB,eAAK,aAAa,MAAM,SAAS;AAAA,QACrC;AAEA,cAAM,OAAO,cAAc,EAAE;AAC7B,cAAM,YAAY;AAElB,YAAI,KAAK,IAAI,IAAI,IAAI,WAAW;AAC5B,cAAI,OAAO,GAAG;AACV,iBAAK,KAAA;AAAA,UACT,OAAO;AACH,iBAAK,KAAA;AAAA,UACT;AAAA,QACJ;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,IAEQ,0BAAgC;AACpC,WAAK,UAAU,iBAAiB,WAAW,CAAC,MAAM;AAC9C,YAAI,EAAE,QAAQ,aAAa;AACvB,YAAE,eAAA;AACF,eAAK,KAAA;AAAA,QACT,WAAW,EAAE,QAAQ,cAAc;AAC/B,YAAE,eAAA;AACF,eAAK,KAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAGD,WAAK,UAAU,aAAa,YAAY,GAAG;AAAA,IAC/C;AAAA,IAEQ,qBAA2B;AAC/B,UAAI,CAAC,KAAK,aAAc;AAExB,WAAK,aAAa,iBAAiB,cAAc,MAAM;AACnD,YAAI,KAAK,kBAAkB;AACvB,eAAK,aAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAED,WAAK,aAAa,iBAAiB,cAAc,MAAM;AACnD,YAAI,KAAK,kBAAkB;AACvB,eAAK,cAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAGD,WAAK,UAAU,iBAAiB,SAAS,MAAM;AAC3C,YAAI,KAAK,kBAAkB;AACvB,eAAK,aAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAED,WAAK,UAAU,iBAAiB,QAAQ,MAAM;AAC1C,YAAI,KAAK,kBAAkB;AACvB,eAAK,cAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAAA,IACL;AAAA,IAEO,UAAU,OAAqB;AAElC,UAAI,QAAQ,GAAG;AACX,gBAAQ,KAAK,aAAa,SAAS;AAAA,MACvC,WAAW,SAAS,KAAK,aAAa,QAAQ;AAC1C,gBAAQ;AAAA,MACZ;AAEA,WAAK,eAAe;AAGpB,UAAI,KAAK,kBAAkB;AACvB,aAAK,iBAAiB,MAAM,UAAU;AACtC,aAAK,iBAAiB,MAAM,aAAa;AAEzC,mBAAW,MAAM;AACb,eAAK,kBAAA;AACL,eAAK,iBAAA;AAEL,cAAI,KAAK,kBAAkB;AACvB,iBAAK,iBAAiB,MAAM,UAAU;AAAA,UAC1C;AAAA,QACJ,GAAG,GAAG;AAAA,MACV;AAGA,UAAI,KAAK,eAAe;AACpB,aAAK,cAAc,KAAK;AAAA,MAC5B;AAAA,IACJ;AAAA,IAEO,OAAa;AAChB,WAAK,UAAU,KAAK,eAAe,CAAC;AAEpC,UAAI,KAAK,kBAAkB;AACvB,aAAK,aAAA;AACL,mBAAW,MAAM;AACb,cAAI,KAAK,kBAAkB;AACvB,iBAAK,cAAA;AAAA,UACT;AAAA,QACJ,GAAG,GAAK;AAAA,MACZ;AAAA,IACJ;AAAA,IAEO,OAAa;AAChB,WAAK,UAAU,KAAK,eAAe,CAAC;AAEpC,UAAI,KAAK,kBAAkB;AACvB,aAAK,aAAA;AACL,mBAAW,MAAM;AACb,cAAI,KAAK,kBAAkB;AACvB,iBAAK,cAAA;AAAA,UACT;AAAA,QACJ,GAAG,GAAK;AAAA,MACZ;AAAA,IACJ;AAAA,IAEO,gBAAsB;AACzB,WAAK,aAAA;AACL,WAAK,mBAAmB,OAAO,YAAY,MAAM;AAC7C,aAAK,KAAA;AAAA,MACT,GAAG,KAAK,aAAa;AAAA,IACzB;AAAA,IAEO,eAAqB;AACxB,UAAI,KAAK,kBAAkB;AACvB,sBAAc,KAAK,gBAAgB;AACnC,aAAK,mBAAmB;AAAA,MAC5B;AAAA,IACJ;AAAA,IAEO,UAAgB;AACnB,WAAK,aAAA;AAAA,IAET;AAAA,IAEO,kBAA0B;AAC7B,aAAO,KAAK;AAAA,IAChB;AAAA,IAEO,uBAA+B;AAClC,aAAO,KAAK,aAAa;AAAA,IAC7B;AAAA,IAEO,kBAAiC;AACpC,aAAO,KAAK;AAAA,IAChB;AAAA,IAEO,gBAAgB,cAAmC;AACtD,WAAK,eAAe;AACpB,WAAK,eAAe;AACpB,WAAK,KAAA;AAAA,IACT;AAAA;AAAA;AAAA;AAAA,IAKQ,YAAY,MAAsB;AACtC,YAAM,QAAQ,KAAK,KAAA,EAAO,MAAM,KAAK;AACrC,UAAI,MAAM,WAAW,GAAG;AACpB,eAAO,MAAM,CAAC,GAAG,OAAO,CAAC,EAAE,iBAAiB;AAAA,MAChD;AACA,YAAM,QAAQ,MAAM,CAAC,GAAG,OAAO,CAAC,KAAK;AACrC,YAAM,OAAO,MAAM,MAAM,SAAS,CAAC,GAAG,OAAO,CAAC,KAAK;AACnD,cAAQ,QAAQ,MAAM,YAAA;AAAA,IAC1B;AAAA;AAAA;AAAA;AAAA,IAKQ,iBAAiB,MAAsB;AAC3C,UAAI,OAAO;AACX,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,eAAO,KAAK,WAAW,CAAC,MAAM,QAAQ,KAAK;AAAA,MAC/C;AAEA,YAAM,MAAM,OAAO;AACnB,aAAO,OAAO,GAAG;AAAA,IACrB;AAAA;AAAA;AAAA;AAAA,IAKQ,mBAAmB,YAA4B;AACnD,UAAI;AACA,cAAM,OAAO,IAAI,KAAK,UAAU;AAChC,cAAM,0BAAU,KAAA;AAChB,cAAM,SAAS,IAAI,QAAA,IAAY,KAAK,QAAA;AACpC,cAAM,UAAU,KAAK,MAAM,SAAS,GAAI;AACxC,cAAM,UAAU,KAAK,MAAM,UAAU,EAAE;AACvC,cAAM,WAAW,KAAK,MAAM,UAAU,EAAE;AACxC,cAAM,UAAU,KAAK,MAAM,WAAW,EAAE;AACxC,cAAM,WAAW,KAAK,MAAM,UAAU,CAAC;AACvC,cAAM,YAAY,KAAK,MAAM,UAAU,EAAE;AACzC,cAAM,WAAW,KAAK,MAAM,UAAU,GAAG;AAEzC,YAAI,UAAU,IAAI;AACd,iBAAO;AAAA,QACX,WAAW,UAAU,IAAI;AACrB,iBAAO,GAAG,OAAO,IAAI,YAAY,IAAI,WAAW,SAAS;AAAA,QAC7D,WAAW,WAAW,IAAI;AACtB,iBAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,QAC3D,WAAW,UAAU,GAAG;AACpB,iBAAO,GAAG,OAAO,IAAI,YAAY,IAAI,QAAQ,MAAM;AAAA,QACvD,WAAW,WAAW,GAAG;AACrB,iBAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,QAC3D,WAAW,YAAY,IAAI;AACvB,iBAAO,GAAG,SAAS,IAAI,cAAc,IAAI,UAAU,QAAQ;AAAA,QAC/D,OAAO;AACH,iBAAO,GAAG,QAAQ,IAAI,aAAa,IAAI,SAAS,OAAO;AAAA,QAC3D;AAAA,MACJ,QAAQ;AACJ,eAAO;AAAA,MACX;AAAA,IACJ;AAAA,EACJ;AAAA,EChpBO,MAAM,aAAa;AAAA;AAAA,IA+BxB,YAAY,QAAsB;AAR1B;AACA,uCAAgC;AAChC,oCAAwB;AACxB,0CAA8B,CAAA;AAC9B,8CAAkC;AAClC,0CAAuB;AACvB,6CAAiC;AAGvC,WAAK,SAAS;AAAA,QACZ,QAAQ;AAAA,QACR,GAAG;AAAA,MAAA;AAGL,WAAK,KAAA;AAAA,IACP;AAAA;AAAA;AAAA;AAAA,IAKA,MAAc,OAAsB;AAClC,UAAI;AACF,gBAAQ,IAAI,4CAA4C,KAAK,MAAM;AAGnE,aAAK,YAAY,KAAK,cAAA;AACtB,YAAI,CAAC,KAAK,WAAW;AACnB,gBAAM,IAAI,MAAM,4BAA4B;AAAA,QAC9C;AAEA,gBAAQ,IAAI,mCAAmC,KAAK,SAAS;AAG7D,aAAK,OAAO,eAAe;AAG3B,YAAI,KAAK,OAAO,UAAU;AAExB,eAAK,SAAS,KAAK,OAAO,SAAS;AACnC,eAAK,eAAe,KAAK,OAAO,SAAS,gBAAgB,CAAA;AACzD,kBAAQ,IAAI,mCAAmC,EAAE,QAAQ,KAAK,QAAQ,cAAc,KAAK,cAAc;AAAA,QACzG,OAAO;AAEL,kBAAQ,IAAI,qCAAqC;AACjD,gBAAM,KAAK,gBAAA;AAAA,QACb;AAEA,gBAAQ,IAAI,qDAAqD,KAAK,MAAM;AAG5E,aAAK,mBAAA;AAEL,gBAAQ,IAAI,uCAAuC;AAGnD,aAAK,aAAA;AAEL,gBAAQ,IAAI,gCAAgC;AAG5C,cAAM,SAAS,KAAK,OAAO,UAAU,UAAU,KAAK,QAAQ;AAC5D,gBAAQ,IAAI,6BAA6B,MAAM;AAE/C,YAAI,WAAW,YAAY;AACzB,kBAAQ,IAAI,sCAAsC;AAClD,eAAK,aAAA;AAAA,QACP;AAGA,YAAI,KAAK,OAAO,UAAU,KAAK,QAAQ;AACrC,eAAK,OAAO,OAAO,KAAK,MAAM;AAAA,QAChC;AAEA,gBAAQ,IAAI,8BAA8B;AAAA,MAC5C,SAAS,OAAO;AACd,gBAAQ,MAAM,8BAA8B,KAAK;AACjD,aAAK,YAAY,KAAc;AAAA,MACjC;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKQ,gBAAoC;AAC1C,UAAI,CAAC,KAAK,OAAO,WAAW;AAE1B,cAAM,UAAU,SAAS,iBAAiB,4BAA4B;AACtE,cAAM,gBAAgB,MAAM,KAAK,OAAO,EAAE;AAAA,UACxC,CAAC,WACC,OAAO,aAAa,oBAAoB,MAAM,KAAK,OAAO;AAAA,QAAA;AAG9D,YAAI,eAAe;AACjB,gBAAM,cAAc,cAAc,aAAa,gBAAgB;AAC/D,cAAI,aAAa;AACf,mBAAO,SAAS,eAAe,WAAW;AAAA,UAC5C;AAGA,gBAAMA,aAAY,SAAS,cAAc,KAAK;AAC9CA,qBAAU,KAAK,iBAAiB,KAAK,OAAO,QAAQ;AACpDA,qBAAU,YAAY,iBAAiB,KAAK,OAAO,QAAQ;AAC3D,wBAAc,YAAY;AAAA,YACxBA;AAAAA,YACA,cAAc;AAAA,UAAA;AAEhB,iBAAOA;AAAAA,QACT;AAGA,cAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,kBAAU,KAAK,iBAAiB,KAAK,OAAO,QAAQ;AACpD,kBAAU,YAAY,iBAAiB,KAAK,OAAO,QAAQ;AAC3D,iBAAS,KAAK,YAAY,SAAS;AACnC,eAAO;AAAA,MACT;AAEA,UAAI,OAAO,KAAK,OAAO,cAAc,UAAU;AAC7C,eAAO,SAAS,cAAc,KAAK,OAAO,SAAS;AAAA,MACrD;AAEA,aAAO,KAAK,OAAO;AAAA,IACrB;AAAA;AAAA;AAAA;AAAA,IAKA,MAAc,kBAAiC;AAC7C,YAAM,MAAM,GAAG,KAAK,OAAO,MAAM,gBAAgB,KAAK,OAAO,QAAQ;AAErE,YAAM,WAAW,MAAM,MAAM,KAAK;AAAA,QAChC,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,gBAAgB;AAAA,QAAA;AAAA,MAClB,CACD;AAED,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,IAAI;AAAA,UACR,gCAAgC,SAAS,MAAM,IAAI,SAAS,UAAU;AAAA,QAAA;AAAA,MAE1E;AAEA,YAAM,SAAkC,MAAM,SAAS,KAAA;AAEvD,UAAI,CAAC,OAAO,WAAW,CAAC,OAAO,MAAM;AACnC,cAAM,IAAI,MAAM,OAAO,OAAO,WAAW,4BAA4B;AAAA,MACvE;AAEA,WAAK,SAAS,OAAO,KAAK;AAC1B,WAAK,eAAe,OAAO,KAAK,gBAAgB,CAAA;AAGhD,cAAQ,IAAI,iBAAiB;AAAA,QAC3B,QAAQ,KAAK;AAAA,QACb,cAAc,KAAK;AAAA,MAAA,CACpB;AAAA,IACH;AAAA;AAAA;AAAA;AAAA,IAKQ,qBAA2B;AACjC,UAAI,CAAC,KAAK,UAAU,CAAC,KAAK,UAAW;AAErC,YAAM,QAAQ;AAAA,QACZ,GAAG;AAAA,QACH,GAAG,KAAK,OAAO;AAAA,QACf,GAAG,KAAK,OAAO;AAAA,MAAA;AAGjB,YAAM,WAAW;AAAA,QACf,GAAG,KAAK,OAAO;AAAA,QACf,GAAG,KAAK,OAAO;AAAA,MAAA;AAIjB,YAAM,SAAS,KAAK,OAAO,UAAU,UAAU,KAAK,OAAO;AAE3D,YAAM,MAAM,eAAe,OAAO,QAAQ,KAAK,OAAO,UAAU,QAAQ;AACxE,mBAAa,KAAK,KAAK,OAAO,QAAQ;AAAA,IACxC;AAAA;AAAA;AAAA;AAAA,IAKQ,eAAqB;AAC3B,UAAI,CAAC,KAAK,UAAU,CAAC,KAAK,UAAW;AAErC,YAAM,WAA2B;AAAA,QAC/B,GAAG,KAAK,OAAO;AAAA,QACf,GAAG,KAAK,OAAO;AAAA,MAAA;AAIjB,YAAM,SAAS,KAAK,OAAO,UAAU,UAAU,KAAK,OAAO;AAG3D,WAAK,kBAAkB;AAGvB,cAAQ,IAAI,oBAAoB;AAAA,QAC9B,SAAS,KAAK,OAAO;AAAA,QACrB,YAAY,KAAK,OAAO;AAAA,QACxB,QAAQ;AAAA,QACR;AAAA,MAAA,CACD;AAED,YAAM,aAAa;AAAA,QACjB,KAAK;AAAA,QACL;AAAA,QACA;AAAA,QACA,KAAK,OAAO;AAAA,MAAA;AAKd,YAAM,eAAe,eAA2B;AAEhD,YAAM,WAAW;AAAA;AAAA,UAEX,UAAU;AAAA,UACV,YAAY;AAAA;AAAA;AAIlB,WAAK,OAAO,QAAQ;AAAA,IACtB;AAAA;AAAA;AAAA;AAAA,IAKQ,eAAqB;AAC3B,UAAI,CAAC,KAAK,aAAa,CAAC,KAAK,OAAQ;AAGrC,YAAM,SAAS,KAAK,OAAO,UAAU,UAAU,KAAK,OAAO;AAG3D,UAAI,WAAW,WAAY;AAE3B,YAAM,WAAW,KAAK,OAAO;AAG7B,YAAM,oBAAoB,KAAK,UAAU;AAAA,QACvC;AAAA,MAAA;AAGF,UAAI,CAAC,kBAAmB;AAGxB,YAAM,uBAAuB,KAAK,aAAa,IAAI,CAAA,OAAM;AAAA,QACvD,IAAI,EAAE;AAAA,QACN,MAAM,EAAE,cAAc;AAAA,QACtB,MAAM,EAAE,cAAc;AAAA,QACtB,SAAS,EAAE;AAAA,QACX,SAAS,EAAE;AAAA,QACX,QAAQ,EAAE;AAAA,QACV,QAAQ,EAAE;AAAA,QACV,WAAW,EAAE;AAAA,QACb,iBAAiB,EAAE;AAAA,QACnB,eAAe,EAAE;AAAA,MAAA,EACjB;AAGF,YAAM,WAAW,IAAI,SAAS;AAAA,QAC5B,WAAW;AAAA,QACX,cAAc;AAAA,QACd,UAAU,SAAS,cAAc;AAAA,QACjC,eAAe,SAAS,kBAAkB;AAAA,QAC1C,YAAY,SAAS,cAAc;AAAA,QACnC,aAAa,SAAS,qBAAqB;AAAA,QAC3C,YAAY,SAAS,cAAc;AAAA,QACnC,UAAU,SAAS,YAAY;AAAA,QAC/B,gBAAgB,SAAS,kBAAkB;AAAA;AAAA,QAC3C,eAAe,CAAC,UAAU;AACxB,eAAK,eAAe;AAAA,QACtB;AAAA,MAAA,CACD;AAGA,WAAa,mBAAmB;AAAA,IACnC;AAAA;AAAA;AAAA;AAAA,IAOQ,OAAO,MAAoB;AACjC,UAAI,CAAC,KAAK,UAAW;AAErB,WAAK,UAAU,YAAY;AAG3B,UAAI,KAAK,QAAQ;AACf,cAAM,cAAc,KAAK,mBAAmB,KAAK,OAAO;AACxD,aAAK,UAAU,YAAY,iBAAiB,KAAK,OAAO,QAAQ,kBAAkB,WAAW;AAAA,MAC/F;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKQ,YAAY,OAAoB;AACtC,cAAQ,MAAM,wBAAwB,KAAK;AAE3C,UAAI,KAAK,WAAW;AAClB,aAAK,OAAO,YAAY,MAAM,OAAO,CAAC;AAAA,MACxC;AAEA,UAAI,KAAK,OAAO,SAAS;AACvB,aAAK,OAAO,QAAQ,KAAK;AAAA,MAC3B;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKO,UAAgB;AAErB,UAAK,KAAa,kBAAkB;AACjC,aAAa,iBAAiB,QAAA;AAC9B,aAAa,mBAAmB;AAAA,MACnC;AAEA,mBAAa,KAAK,OAAO,QAAQ;AAEjC,UAAI,KAAK,WAAW;AAClB,aAAK,UAAU,YAAY;AAAA,MAC7B;AAEA,WAAK,SAAS;AACd,WAAK,eAAe,CAAA;AACpB,WAAK,YAAY;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA,IAKA,MAAa,UAAyB;AACpC,UAAI;AACF,cAAM,KAAK,gBAAA;AACX,aAAK,aAAA;AAEL,YAAI,KAAK,QAAQ,WAAW,YAAY;AACtC,eAAK,aAAA;AAAA,QACP;AAAA,MACF,SAAS,OAAO;AACd,aAAK,YAAY,KAAc;AAAA,MACjC;AAAA,IACF;AAAA;AAAA;AAAA;AAAA,IAKO,YAA2B;AAChC,aAAO,KAAK;AAAA,IACd;AAAA;AAAA;AAAA;AAAA,IAKO,kBAAiC;AACtC,aAAO,KAAK;AAAA,IACd;AAAA,EACF;AAnYE;AAAA,gBAFW,cAEJ,QAGa,MAAM;AACxB,UAAM,IAAI,MAAM,2EAA2E;AAAA,EAC7F;AACA,gBARW,cAQJ,WAAsC,MAAM;AACjD,UAAM,IAAI,MAAM,8EAA8E;AAAA,EAChG;AACA,gBAXW,cAWJ,WAA+C,YAAY;AAChE,UAAM,IAAI,MAAM,8EAA8E;AAAA,EAChG;AACA,gBAdW,cAcJ,cAAkC,YAAY;AACnD,UAAM,IAAI,MAAM,iFAAiF;AAAA,EACnG;AACA,gBAjBW,cAiBJ,OAAiD,MAAM;AAC5D,UAAM,IAAI,MAAM,0EAA0E;AAAA,EAC5F;AACA,gBApBW,cAoBJ,UAA+B,MAAM;AAC1C,UAAM,IAAI,MAAM,6EAA6E;AAAA,EAC/F;AC7BF,SAAO,eAAe;AACtB,SAAO,gBAAgB,OAAO,iBAAiB,oBAAI,IAAA;AAKnD,WAAS,iBAAuB;AAE9B,UAAM,UAAU,SAAS,iBAAiB,4BAA4B;AAEtE,YAAQ,QAAQ,CAAC,WAAW;AAC1B,YAAM,WAAW,OAAO,aAAa,oBAAoB;AACzD,UAAI,CAAC,SAAU;AAGf,UAAI,OAAO,cAAc,IAAI,QAAQ,EAAG;AAGxC,YAAM,SAAuB;AAAA,QAC3B;AAAA,QACA,QAAQ,OAAO,aAAa,cAAc,KAAK;AAAA,QAC/C,WAAW,OAAO,aAAa,gBAAgB,KAAK;AAAA,MAAA;AAItD,YAAM,eAAe,OAAO,aAAa,oBAAoB;AAC7D,YAAM,kBAAkB,OAAO,aAAa,uBAAuB;AACnE,YAAM,YAAY,OAAO,aAAa,iBAAiB;AACvD,YAAM,sBAAsB,OAAO;AAAA,QACjC;AAAA,MAAA;AAEF,YAAM,eAAe,OAAO,aAAa,oBAAoB;AAC7D,YAAM,aAAa,OAAO,aAAa,kBAAkB;AAEzD,UACE,gBACA,mBACA,aACA,uBACA,gBACA,YACA;AACA,eAAO,QAAQ;AAAA,UACb,GAAI,gBAAgB,EAAE,aAAA;AAAA,UACtB,GAAI,mBAAmB,EAAE,gBAAA;AAAA,UACzB,GAAI,aAAa,EAAE,UAAA;AAAA,UACnB,GAAI,uBAAuB,EAAE,oBAAA;AAAA,UAC7B,GAAI,gBAAgB,EAAE,cAAc,SAAS,cAAc,EAAE,EAAA;AAAA,UAC7D,GAAI,cAAc,EAAE,WAAA;AAAA,QAAW;AAAA,MAEnC;AAGA,YAAM,aAAa,OAAO,aAAa,kBAAkB;AACzD,YAAM,WAAW,OAAO,aAAa,gBAAgB;AACrD,YAAM,kBAAkB,OAAO,aAAa,wBAAwB;AACpE,YAAM,iBAAiB,OAAO,aAAa,uBAAuB;AAClE,YAAM,oBAAoB,OAAO,aAAa,0BAA0B;AACxE,YAAM,WAAW,OAAO,aAAa,eAAe;AACpD,YAAM,gBAAgB,OAAO,aAAa,qBAAqB;AAC/D,YAAM,WAAW,OAAO,aAAa,gBAAgB;AAErD,UACE,cACA,YACA,mBACA,kBACA,qBACA,YACA,iBACA,UACA;AACA,eAAO,WAAW;AAAA,UAChB,GAAI,cAAc,EAAE,YAAY,eAAe,OAAA;AAAA,UAC/C,GAAI,YAAY,EAAE,UAAU,aAAa,OAAA;AAAA,UACzC,GAAI,mBAAmB,EAAE,iBAAiB,oBAAoB,OAAA;AAAA,UAC9D,GAAI,kBAAkB,EAAE,gBAAgB,mBAAmB,OAAA;AAAA,UAC3D,GAAI,qBAAqB;AAAA,YACvB,mBAAmB,sBAAsB;AAAA,UAAA;AAAA,UAE3C,GAAI,YAAY,EAAE,UAAU,aAAa,OAAA;AAAA,UACzC,GAAI,iBAAiB,EAAE,eAAe,SAAS,eAAe,EAAE,EAAA;AAAA,UAChE,GAAI,YAAY,EAAE,UAAU,SAAS,UAAU,EAAE,EAAA;AAAA,QAAE;AAAA,MAEvD;AAGA,UAAI;AACF,cAAM,SAAS,IAAI,aAAa,MAAM;AACtC,eAAO,cAAc,IAAI,UAAU,MAAM;AAAA,MAC3C,SAAS,OAAO;AACd,gBAAQ,MAAM,sCAAsC,QAAQ,KAAK,KAAK;AAAA,MACxE;AAAA,IACF,CAAC;AAAA,EACH;AAKA,MAAI,SAAS,eAAe,WAAW;AACrC,aAAS,iBAAiB,oBAAoB,cAAc;AAAA,EAC9D,OAAO;AAEL,mBAAA;AAAA,EACF;AAMA,eAAa,OAAO,CAAC,UAAkB,WAAmC;AACxE,UAAM,aAA2B;AAAA,MAC/B;AAAA,MACA,GAAG;AAAA,IAAA;AAGL,UAAM,SAAS,IAAI,aAAa,UAAU;AAC1C,WAAO,cAAc,IAAI,UAAU,MAAM;AACzC,WAAO;AAAA,EACT;AAEA,eAAa,UAAU,CAAC,aAAqB;AAC3C,UAAM,SAAS,OAAO,cAAc,IAAI,QAAQ;AAChD,QAAI,QAAQ;AACV,aAAO,QAAA;AACP,aAAO,cAAc,OAAO,QAAQ;AAAA,IACtC;AAAA,EACF;AAEA,eAAa,UAAU,OAAO,aAAqB;AACjD,UAAM,SAAS,OAAO,cAAc,IAAI,QAAQ;AAChD,QAAI,QAAQ;AACV,YAAM,OAAO,QAAA;AAAA,IACf;AAAA,EACF;AAEA,eAAa,aAAa,YAAY;AACpC,UAAM,WAAW,MAAM,KAAK,OAAO,cAAc,OAAA,CAAQ,EAAE;AAAA,MAAI,CAAC,WAC9D,OAAO,QAAA;AAAA,IAAQ;AAEjB,UAAM,QAAQ,IAAI,QAAQ;AAAA,EAC5B;AAEA,eAAa,MAAM,CAAC,aAAqB;AACvC,WAAO,OAAO,cAAc,IAAI,QAAQ,KAAK;AAAA,EAC/C;AAEA,eAAa,SAAS,MAAM;AAC1B,WAAO,MAAM,KAAK,OAAO,cAAc,QAAQ;AAAA,EACjD;AAGA,MAAI,OAAO,WAAW,aAAa;AAChC,WAAe,eAAe;AAAA,EACjC;;;;"}