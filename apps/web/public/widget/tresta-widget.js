var TrestaWidgetLib=function(t){"use strict";var e,r,n,o,i,a,s,l,c,d,u,h=Object.defineProperty,g=(t,e,r)=>((t,e,r)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r)(t,"symbol"!=typeof e?e+"":e,r),_="undefined"!=typeof document?document.currentScript:null,p={},m=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,y=Array.isArray;function w(t,e){for(var r in e)t[r]=e[r];return t}function v(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function b(t,r,n){var o,i,a,s={};for(a in r)"key"==a?o=r[a]:"ref"==a?i=r[a]:s[a]=r[a];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):n),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===s[a]&&(s[a]=t.defaultProps[a]);return R(t,s,o,i,null)}function R(t,e,o,i,a){var s={type:t,props:e,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++n:a,__i:-1,__u:0};return null==a&&null!=r.vnode&&r.vnode(s),s}function T(t){return t.children}function x(t,e){this.props=t,this.context=e}function E(t,e){if(null==e)return t.__?E(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e)return r.__e;return"function"==typeof t.type?E(t):null}function S(t){var e,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(r=t.__k[e])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return S(t)}}function k(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!I.__r++||i!=r.debounceRendering)&&((i=r.debounceRendering)||a)(I)}function I(){for(var t,e,n,i,a,l,c,d=1;o.length;)o.length>d&&o.sort(s),t=o.shift(),d=o.length,t.__d&&(n=void 0,i=void 0,a=(i=(e=t).__v).__e,l=[],c=[],e.__P&&((n=w({},i)).__v=i.__v+1,r.vnode&&r.vnode(n),P(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[a]:null,l,null==a?E(i):a,!!(32&i.__u),c),n.__v=i.__v,n.__.__k[n.__i]=n,U(l,n,c),i.__e=i.__=null,n.__e!=a&&S(n)));I.__r=0}function A(t,e,r,n,o,i,a,s,l,c,d){var u,h,g,_,f,w,v,b=n&&n.__k||m,x=e.length;for(l=function(t,e,r,n,o){var i,a,s,l,c,d=r.length,u=d,h=0;for(t.__k=new Array(o),i=0;i<o;i++)null!=(a=e[i])&&"boolean"!=typeof a&&"function"!=typeof a?(l=i+h,(a=t.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?R(null,a,null,null,null):y(a)?R(T,{children:a},null,null,null):null==a.constructor&&a.__b>0?R(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,s=null,-1!=(c=a.__i=C(a,r,l,u))&&(u--,(s=r[c])&&(s.__u|=2)),null==s||null==s.__v?(-1==c&&(o>d?h--:o<d&&h++),"function"!=typeof a.type&&(a.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,a.__u|=4))):t.__k[i]=null;if(u)for(i=0;i<d;i++)null!=(s=r[i])&&!(2&s.__u)&&(s.__e==n&&(n=E(s)),q(s,s));return n}(r,e,b,l,x),u=0;u<x;u++)null!=(g=r.__k[u])&&(h=-1==g.__i?p:b[g.__i]||p,g.__i=u,w=P(t,g,h,o,i,a,s,l,c,d),_=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&L(h.ref,null,g),d.push(g.ref,g.__c||_,g)),null==f&&null!=_&&(f=_),(v=!!(4&g.__u))||h.__k===g.__k?l=D(g,l,t,v):"function"==typeof g.type&&void 0!==w?l=w:_&&(l=_.nextSibling),g.__u&=-7);return r.__e=f,l}function D(t,e,r,n){var o,i;if("function"==typeof t.type){for(o=t.__k,i=0;o&&i<o.length;i++)o[i]&&(o[i].__=t,e=D(o[i],e,r,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=E(t)),r.insertBefore(t.__e,e||null)),e=t.__e);do{e=e&&e.nextSibling}while(null!=e&&8==e.nodeType);return e}function C(t,e,r,n){var o,i,a,s=t.key,l=t.type,c=e[r],d=null!=c&&!(2&c.__u);if(null===c&&null==t.key||d&&s==c.key&&l==c.type)return r;if(n>(d?1:0))for(o=r-1,i=r+1;o>=0||i<e.length;)if(null!=(c=e[a=o>=0?o--:i++])&&!(2&c.__u)&&s==c.key&&l==c.type)return a;return-1}function N(t,e,r){"-"==e[0]?t.setProperty(e,null==r?"":r):t[e]=null==r?"":"number"!=typeof r||f.test(e)?r:r+"px"}function M(t,e,r,n,o){var i,a;t:if("style"==e)if("string"==typeof r)t.style.cssText=r;else{if("string"==typeof n&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||N(t.style,e,"");if(r)for(e in r)n&&r[e]==n[e]||N(t.style,e,r[e])}else if("o"==e[0]&&"n"==e[1])i=e!=(e=e.replace(l,"$1")),a=e.toLowerCase(),e=a in t||"onFocusOut"==e||"onFocusIn"==e?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?n?r.u=n.u:(r.u=c,t.addEventListener(e,i?u:d,i)):t.removeEventListener(e,i?u:d,i);else{if("http://www.w3.org/2000/svg"==o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=e&&"height"!=e&&"href"!=e&&"list"!=e&&"form"!=e&&"tabIndex"!=e&&"download"!=e&&"rowSpan"!=e&&"colSpan"!=e&&"role"!=e&&"popover"!=e&&e in t)try{t[e]=null==r?"":r;break t}catch(s){}"function"==typeof r||(null==r||!1===r&&"-"!=e[4]?t.removeAttribute(e):t.setAttribute(e,"popover"==e&&1==r?"":r))}}function W(t){return function(e){if(this.l){var n=this.l[e.type+t];if(null==e.t)e.t=c++;else if(e.t<n.u)return;return n(r.event?r.event(e):e)}}}function P(t,n,o,i,a,s,l,c,d,u){var h,g,_,m,f,b,R,S,k,I,D,C,N,W,P,U,L,q=n.type;if(null!=n.constructor)return null;128&o.__u&&(d=!!(32&o.__u),s=[c=n.__e=o.__e]),(h=r.__b)&&h(n);t:if("function"==typeof q)try{if(S=n.props,k="prototype"in q&&q.prototype.render,I=(h=q.contextType)&&i[h.__c],D=h?I?I.props.value:h.__:i,o.__c?R=(g=n.__c=o.__c).__=g.__E:(k?n.__c=g=new q(S,D):(n.__c=g=new x(S,D),g.constructor=q,g.render=B),I&&I.sub(g),g.props=S,g.state||(g.state={}),g.context=D,g.__n=i,_=g.__d=!0,g.__h=[],g._sb=[]),k&&null==g.__s&&(g.__s=g.state),k&&null!=q.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=w({},g.__s)),w(g.__s,q.getDerivedStateFromProps(S,g.__s))),m=g.props,f=g.state,g.__v=n,_)k&&null==q.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),k&&null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(k&&null==q.getDerivedStateFromProps&&S!==m&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(S,D),!g.__e&&null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(S,g.__s,D)||n.__v==o.__v){for(n.__v!=o.__v&&(g.props=S,g.state=g.__s,g.__d=!1),n.__e=o.__e,n.__k=o.__k,n.__k.some(function(t){t&&(t.__=n)}),C=0;C<g._sb.length;C++)g.__h.push(g._sb[C]);g._sb=[],g.__h.length&&l.push(g);break t}null!=g.componentWillUpdate&&g.componentWillUpdate(S,g.__s,D),k&&null!=g.componentDidUpdate&&g.__h.push(function(){g.componentDidUpdate(m,f,b)})}if(g.context=D,g.props=S,g.__P=t,g.__e=!1,N=r.__r,W=0,k){for(g.state=g.__s,g.__d=!1,N&&N(n),h=g.render(g.props,g.state,g.context),P=0;P<g._sb.length;P++)g.__h.push(g._sb[P]);g._sb=[]}else do{g.__d=!1,N&&N(n),h=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++W<25);g.state=g.__s,null!=g.getChildContext&&(i=w(w({},i),g.getChildContext())),k&&!_&&null!=g.getSnapshotBeforeUpdate&&(b=g.getSnapshotBeforeUpdate(m,f)),U=h,null!=h&&h.type===T&&null==h.key&&(U=$(h.props.children)),c=A(t,y(U)?U:[U],n,o,i,a,s,l,c,d,u),g.base=n.__e,n.__u&=-161,g.__h.length&&l.push(g),R&&(g.__E=g.__=null)}catch(F){if(n.__v=null,d||null!=s)if(F.then){for(n.__u|=d?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,n.__e=c}else{for(L=s.length;L--;)v(s[L]);O(n)}else n.__e=o.__e,n.__k=o.__k,F.then||O(n);r.__e(F,n,o)}else null==s&&n.__v==o.__v?(n.__k=o.__k,n.__e=o.__e):c=n.__e=function(t,n,o,i,a,s,l,c,d){var u,h,g,_,m,f,w,b=o.props,R=n.props,T=n.type;if("svg"==T?a="http://www.w3.org/2000/svg":"math"==T?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(u=0;u<s.length;u++)if((m=s[u])&&"setAttribute"in m==!!T&&(T?m.localName==T:3==m.nodeType)){t=m,s[u]=null;break}if(null==t){if(null==T)return document.createTextNode(R);t=document.createElementNS(a,T,R.is&&R),c&&(r.__m&&r.__m(n,s),c=!1),s=null}if(null==T)b===R||c&&t.data==R||(t.data=R);else{if(s=s&&e.call(t.childNodes),b=o.props||p,!c&&null!=s)for(b={},u=0;u<t.attributes.length;u++)b[(m=t.attributes[u]).name]=m.value;for(u in b)if(m=b[u],"children"==u);else if("dangerouslySetInnerHTML"==u)g=m;else if(!(u in R)){if("value"==u&&"defaultValue"in R||"checked"==u&&"defaultChecked"in R)continue;M(t,u,null,m,a)}for(u in R)m=R[u],"children"==u?_=m:"dangerouslySetInnerHTML"==u?h=m:"value"==u?f=m:"checked"==u?w=m:c&&"function"!=typeof m||b[u]===m||M(t,u,m,b[u],a);if(h)c||g&&(h.__html==g.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),n.__k=[];else if(g&&(t.innerHTML=""),A("template"==n.type?t.content:t,y(_)?_:[_],n,o,i,"foreignObject"==T?"http://www.w3.org/1999/xhtml":a,s,l,s?s[0]:o.__k&&E(o,0),c,d),null!=s)for(u=s.length;u--;)v(s[u]);c||(u="value","progress"==T&&null==f?t.removeAttribute("value"):null!=f&&(f!==t[u]||"progress"==T&&!f||"option"==T&&f!=b[u])&&M(t,u,f,b[u],a),u="checked",null!=w&&w!=t[u]&&M(t,u,w,b[u],a))}return t}(o.__e,n,o,i,a,s,l,d,u);return(h=r.diffed)&&h(n),128&n.__u?void 0:c}function O(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(O)}function U(t,e,n){for(var o=0;o<n.length;o++)L(n[o],n[++o],n[++o]);r.__c&&r.__c(e,t),t.some(function(e){try{t=e.__h,e.__h=[],t.some(function(t){t.call(e)})}catch(n){r.__e(n,e.__v)}})}function $(t){return"object"!=typeof t||null==t||t.__b&&t.__b>0?t:y(t)?t.map($):w({},t)}function L(t,e,n){try{if("function"==typeof t){var o="function"==typeof t.__u;o&&t.__u(),o&&null==e||(t.__u=t(e))}else t.current=e}catch(i){r.__e(i,n)}}function q(t,e,n){var o,i;if(r.unmount&&r.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||L(o,null,e)),null!=(o=t.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(a){r.__e(a,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&q(o[i],e,n||"function"!=typeof t.type);n||v(t.__e),t.__c=t.__=t.__e=void 0}function B(t,e,r){return this.constructor(t,r)}function F(t,n,o){var i,a,s;n==document&&(n=document.documentElement),r.__&&r.__(t,n),i=n.__k,a=[],s=[],P(n,t=n.__k=b(T,null,[t]),i||p,p,n.namespaceURI,i?null:n.firstChild?e.call(n.childNodes):null,a,i?i.__e:n.firstChild,!1,s),U(a,t,s)}e=m.slice,r={__e:function(t,e,r,n){for(var o,i,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(t)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(t,n||{}),a=o.__d),a)return o.__E=o}catch(s){t=s}throw t}},n=0,x.prototype.setState=function(t,e){var r;r=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=w({},this.state),"function"==typeof t&&(t=t(w({},r),this.props)),t&&w(r,t),null!=t&&this.__v&&(e&&this._sb.push(e),k(this))},x.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),k(this))},x.prototype.render=T,o=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=function(t,e){return t.__v.__b-e.__v.__b},I.__r=0,l=/(PointerCapture)$|Capture$/i,c=0,d=W(!1),u=W(!0);var H=(t=>(t.INVALID_WIDGET_ID="INVALID_WIDGET_ID",t.API_TIMEOUT="API_TIMEOUT",t.API_ERROR="API_ERROR",t.NETWORK_ERROR="NETWORK_ERROR",t.RATE_LIMITED="RATE_LIMITED",t.UNAUTHORIZED="UNAUTHORIZED",t.PARSE_ERROR="PARSE_ERROR",t.RENDER_ERROR="RENDER_ERROR",t))(H||{});class j extends Error{constructor(t,e,r=!0){super(e),this.code=t,this.recoverable=r,this.name="WidgetError"}}class z{constructor(t={}){g(this,"theme"),g(this,"debug"),this.theme=t.theme??this.getDefaultTheme(),this.debug=t.debug??!1,this.debug&&console.log("[TrestaWidget] ThemeManager initialized with theme:",this.theme)}getDefaultTheme(){return{mode:"light",primaryColor:"#3b82f6",secondaryColor:"#64748b",cardStyle:"default"}}applyTheme(t){this.applyThemeMode(t),this.applyColors(t),this.applyFontFamily(t),this.applyCardStyle(t),this.debug&&console.log("[TrestaWidget] Theme applied to root element")}applyThemeMode(t){let e=this.theme.mode;"auto"===e&&(e=this.detectPreferredColorScheme()),t.setAttribute("data-theme",e)}detectPreferredColorScheme(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}applyColors(t){t.style.setProperty("--tresta-primary-color",this.theme.primaryColor),t.style.setProperty("--tresta-secondary-color",this.theme.secondaryColor)}applyFontFamily(t){if(this.theme.fontFamily){const e=`${this.theme.fontFamily}, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif`;t.style.setProperty("--tresta-font-family",e)}}applyCardStyle(t){t.setAttribute("data-card-style",this.theme.cardStyle)}updateTheme(t){this.theme={...this.theme,...t},this.debug&&console.log("[TrestaWidget] Theme updated:",this.theme)}getTheme(){return{...this.theme}}static parseThemeFromElement(t){const e={},r=t.getAttribute("data-theme-mode");"light"!==r&&"dark"!==r&&"auto"!==r||(e.mode=r);const n=t.getAttribute("data-primary-color");n&&(e.primaryColor=n);const o=t.getAttribute("data-secondary-color");o&&(e.secondaryColor=o);const i=t.getAttribute("data-font-family");i&&(e.fontFamily=i);const a=t.getAttribute("data-card-style");return"default"!==a&&"minimal"!==a&&"bordered"!==a||(e.cardStyle=a),e}}const V='.tresta-widget-root,.tresta-widget-root *,.tresta-widget-root *:before,.tresta-widget-root *:after{box-sizing:border-box;margin:0;padding:0}.tresta-widget-root{width:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased}.tresta-branding{margin-top:16px;display:flex;justify-content:center}.tresta-branding__link{font-size:10px;color:#00796b;text-decoration:none;transition:color .2s}.tresta-branding__link:hover{color:#004d40}.tresta-card{border-radius:12px;border:1px solid;transition:all .3s ease;height:100%}.tresta-card--light{color:#18181b}.tresta-card--dark{color:#fff}.tresta-card--default.tresta-card--light{border-color:#e4e4e7;background:#fff;box-shadow:0 1px 3px #00000014}.tresta-card--default.tresta-card--dark{border-color:#27272a;background:#18181b;box-shadow:0 1px 3px #0000004d}.tresta-card--minimal{border-color:transparent;background:transparent;box-shadow:none}.tresta-card--bordered.tresta-card--light{border-color:#d4d4d8;background:transparent}.tresta-card--bordered.tresta-card--dark{border-color:#3f3f46;background:transparent}.tresta-card--glass.tresta-card--light{border-color:#e4e4e780;background:#fff9;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}.tresta-card--glass.tresta-card--dark{border-color:#ffffff1a;background:#ffffff0d;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)}.tresta-card__body{padding:24px;display:flex;flex-direction:column;height:100%}.tresta-card__stars{display:flex;gap:2px;margin-bottom:16px}.tresta-star{width:16px;height:16px}.tresta-card__content{margin-bottom:16px;font-size:14px;flex-grow:1}.tresta-card__content--light{color:#52525b}.tresta-card__content--dark{color:#a1a1aa}.tresta-card__author{display:flex;align-items:center;gap:12px;margin-top:auto}.tresta-card__avatar{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;overflow:hidden;flex-shrink:0}.tresta-card__avatar--light{background:#f4f4f5;color:#52525b}.tresta-card__avatar--dark{background:#27272a;color:#d4d4d8}.tresta-card__avatar-img{width:100%;height:100%;object-fit:cover}.tresta-card__avatar-initials{font-size:12px;font-weight:500}.tresta-card__name{font-size:14px;font-weight:600}.tresta-card__meta{font-size:12px;color:#71717a}.tresta-card__date{margin-top:16px;font-size:12px}.tresta-card__date--light{color:#a1a1aa}.tresta-card__date--dark{color:#52525b}.tresta-grid{display:grid;grid-template-columns:1fr;gap:16px}@media(min-width:640px){.tresta-grid[data-cols="2"],.tresta-grid[data-cols="3"],.tresta-grid[data-cols="4"]{grid-template-columns:repeat(2,1fr)}}@media(min-width:1024px){.tresta-grid[data-cols="3"]{grid-template-columns:repeat(3,1fr)}.tresta-grid[data-cols="4"]{grid-template-columns:repeat(4,1fr)}}.tresta-list{display:flex;flex-direction:column;gap:16px}.tresta-masonry{column-count:1;column-gap:16px}.tresta-masonry-item{break-inside:avoid;margin-bottom:16px}@media(min-width:640px){.tresta-masonry[data-cols="2"],.tresta-masonry[data-cols="3"],.tresta-masonry[data-cols="4"]{column-count:2}}@media(min-width:1024px){.tresta-masonry[data-cols="3"]{column-count:3}.tresta-masonry[data-cols="4"]{column-count:4}}.tresta-wall{column-count:1;column-gap:12px}.tresta-wall-item{break-inside:avoid;margin-bottom:12px;transition:transform .3s ease}.tresta-wall-item:hover{transform:rotate(0) scale(1.02)!important;z-index:1}@media(min-width:640px){.tresta-wall[data-cols="2"],.tresta-wall[data-cols="3"],.tresta-wall[data-cols="4"]{column-count:2}}@media(min-width:1024px){.tresta-wall[data-cols="3"]{column-count:3}.tresta-wall[data-cols="4"]{column-count:4}}.tresta-carousel{position:relative;width:100%}.tresta-carousel-track{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;scrollbar-width:none;gap:16px}.tresta-carousel-track::-webkit-scrollbar{display:none}.tresta-carousel-slide{flex:0 0 100%;scroll-snap-align:start;min-width:0}.tresta-carousel-prev,.tresta-carousel-next{position:absolute;top:50%;transform:translateY(-50%);z-index:2;display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:50%;border:1px solid rgba(128,128,128,.3);background:#00000080;color:#fff;cursor:pointer;transition:background .2s;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.tresta-carousel-prev{left:8px}.tresta-carousel-next{right:8px}.tresta-carousel-prev:hover,.tresta-carousel-next:hover{background:#000000bf}.tresta-carousel-dots{display:flex;justify-content:center;gap:6px;margin-top:16px}.tresta-carousel-dot{width:8px;height:8px;border-radius:50%;border:none;background:#80808066;cursor:pointer;transition:background .2s,transform .2s;padding:0}.tresta-carousel-dot.active{background:#06f;transform:scale(1.25)}.tresta-marquee,.tresta-marquee-row{overflow:hidden;width:100%}.tresta-marquee-track{display:flex;gap:16px;width:max-content;animation:tresta-marquee-scroll 30s linear infinite}.tresta-marquee-reverse .tresta-marquee-track{animation-direction:reverse}.tresta-marquee:hover .tresta-marquee-track{animation-play-state:paused}.tresta-marquee-item{flex:0 0 320px;max-width:320px;min-width:280px}@keyframes tresta-marquee-scroll{0%{transform:translate(0)}to{transform:translate(-50%)}}';class G{constructor(t={}){g(this,"shadowRoot",null),g(this,"useShadowDOM"),g(this,"debug"),g(this,"themeManager"),g(this,"nonceApplier"),this.useShadowDOM=t.useShadowDOM??this.detectShadowDOMSupport(),this.debug=t.debug??!1,this.nonceApplier=t.nonceApplier;const e={debug:this.debug};t.theme&&(e.theme=t.theme),this.themeManager=new z(e),this.debug&&console.log(`[TrestaWidget] StyleManager initialized with Shadow DOM: ${this.useShadowDOM}`)}detectShadowDOMSupport(){return"attachShadow"in Element.prototype}initializeStyles(t){return this.useShadowDOM?this.initializeShadowDOM(t):this.initializeNamespacedCSS(t)}initializeShadowDOM(t){this.shadowRoot=t.attachShadow({mode:"open"});const e=document.createElement("style");this.applyNonce(e),e.textContent=this.getShadowDOMStyles(),this.shadowRoot.appendChild(e);const r=document.createElement("div");return r.setAttribute("data-tresta-widget-root","true"),r.setAttribute("data-tresta-widget","true"),this.shadowRoot.appendChild(r),this.themeManager.applyTheme(r),this.debug&&console.log("[TrestaWidget] Shadow DOM initialized"),r}initializeNamespacedCSS(t){if(t.classList.add("tresta-widget"),!document.getElementById("tresta-widget-styles")){const t=document.createElement("style");t.id="tresta-widget-styles",this.applyNonce(t),t.textContent=this.getNamespacedStyles(),document.head.appendChild(t)}const e=document.createElement("div");return e.setAttribute("data-tresta-widget-root","true"),e.setAttribute("data-tresta-widget","true"),e.classList.add("tresta-widget-root"),t.appendChild(e),this.themeManager.applyTheme(e),this.debug&&console.log("[TrestaWidget] Namespaced CSS initialized"),e}getShadowDOMStyles(){return V}getNamespacedStyles(){let t=V.replace(/:root\s*{/g,".tresta-widget {").replace(/\[data-tresta-widget\]/g,".tresta-widget-root");return t=`.tresta-widget { all: initial; }\n${t}`,t}cleanup(){this.shadowRoot=null}getThemeManager(){return this.themeManager}isShadowDOM(){return this.useShadowDOM}getShadowRoot(){return this.shadowRoot}applyNonce(t){this.nonceApplier&&this.nonceApplier(t)}}class K{constructor(){g(this,"requestInterceptors",[]),g(this,"responseInterceptors",[])}addRequestInterceptor(t){this.requestInterceptors.push(t)}addResponseInterceptor(t){this.responseInterceptors.push(t)}async request(t,e={}){let r=t,n=e;for(const i of this.requestInterceptors){const t=await i(r,n);r=t.url,n=t.options}let o=await async function(t,e={}){const{method:r="GET",headers:n={},body:o,timeout:i=1e4}=e,a=new AbortController,s=setTimeout(()=>a.abort(),i);try{const e={method:r,headers:{"Content-Type":"application/json",...n},signal:a.signal,credentials:"omit"};o&&"GET"!==r&&(e.body=JSON.stringify(o));const i=await fetch(t,e);let l;clearTimeout(s);const c=i.headers.get("content-type");return l=c&&c.includes("application/json")?await i.json():await i.text(),{data:l,status:i.status,headers:i.headers}}catch(l){if(clearTimeout(s),l instanceof Error&&"AbortError"===l.name)throw new j(H.API_TIMEOUT,`Request timed out after ${i}ms`,!0);if(l instanceof TypeError)throw new j(H.NETWORK_ERROR,"Network request failed. Please check your connection.",!0);throw l}}(r,n);for(const i of this.responseInterceptors)o=await i(o);return o}}const J={maxRetries:3,baseDelay:1e3,maxDelay:1e4,jitter:1e3};function X(t,e){const r=e.baseDelay*Math.pow(2,t),n=Math.random()*e.jitter;return Math.min(r+n,e.maxDelay)}function Y(t){return new Promise(e=>setTimeout(e,t))}function Z(t){if(t instanceof j){const e=[H.API_TIMEOUT,H.NETWORK_ERROR,H.API_ERROR];return t.recoverable&&e.includes(t.code)}return!1}const Q={maxRequests:100,windowMs:6e4};class tt{constructor(t={}){g(this,"config"),g(this,"records",new Map),this.config={...Q,...t}}isAllowed(t){const e=Date.now(),r=this.getOrCreateRecord(t);return r.timestamps=r.timestamps.filter(t=>e-t<this.config.windowMs),r.timestamps.length<this.config.maxRequests&&(r.timestamps.push(e),!0)}getRetryAfter(t){const e=Date.now(),r=this.records.get(t);if(!r||0===r.timestamps.length)return 0;if(r.timestamps=r.timestamps.filter(t=>e-t<this.config.windowMs),r.timestamps.length<this.config.maxRequests)return 0;const n=r.timestamps[0];if(!n)return 0;const o=n+this.config.windowMs-e;return Math.max(0,o)}reset(t){this.records.delete(t)}resetAll(){this.records.clear()}getRequestCount(t){const e=Date.now(),r=this.records.get(t);return r?r.timestamps.filter(t=>e-t<this.config.windowMs).length:0}getOrCreateRecord(t){let e=this.records.get(t);return e||(e={timestamps:[]},this.records.set(t,e)),e}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}}const et={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},rt=(()=>{if(void 0!=={url:_&&"SCRIPT"===_.tagName.toUpperCase()&&_.src||new URL("tresta-widget.js",document.baseURI).href}&&et)return et;const t="undefined"!=typeof globalThis?globalThis.process:void 0;return t?.env?t.env:{}})(),nt=(...t)=>{for(const e of t){const t=rt[e];if("string"==typeof t&&t.trim().length>0)return t}},ot=t=>{if(t)return t.replace(/\/+$/,"")},it=t=>{if(t)try{return new URL(t).hostname}catch{return t.replace(/^https?:\/\//,"").replace(/\/.+$/,"").trim()}},at=ot(nt("VITE_WIDGET_CDN_BASE_URL","NEXT_PUBLIC_WIDGET_CDN_BASE_URL"))??"https://api.tresta.app",st=ot(nt("VITE_WIDGET_API_BASE_URL","NEXT_PUBLIC_WIDGET_API_BASE_URL"))??"https://api.tresta.app",lt=ot(nt("VITE_WIDGET_TELEMETRY_ENDPOINT","NEXT_PUBLIC_WIDGET_TELEMETRY_ENDPOINT"))??`${st}/telemetry`;ot(nt("VITE_WIDGET_BRANDING_URL","NEXT_PUBLIC_WIDGET_BRANDING_URL"));const ct=(dt=nt("VITE_WIDGET_ALLOWED_DOMAINS","NEXT_PUBLIC_WIDGET_ALLOWED_DOMAINS"))?dt.split(",").map(t=>t.trim()).filter(Boolean):[];var dt;const ut=Array.from(new Set([it(at),it(st),...ct].filter(Boolean))),ht={baseURL:st,timeout:1e4,maxRetries:3};class gt{constructor(t={},e,r){g(this,"config"),g(this,"networkClient"),g(this,"rateLimiter"),g(this,"apiKey"),g(this,"logger",null),this.config={...ht,...t},this.networkClient=new K,this.rateLimiter=new tt({maxRequests:100,windowMs:6e4}),this.apiKey=e,this.logger=r||null}async fetchWidgetData(t){if(!this.apiKey)throw new j(H.UNAUTHORIZED,"API key is required. Please provide an API key.",!1);if(!this.rateLimiter.isAllowed(t)){const e=this.rateLimiter.getRetryAfter(t),r=`Rate limit exceeded for widget ${t}. Retry after ${Math.ceil(e/1e3)}s`;throw this.logger?this.logger.warn(r):console.warn(`[TrestaWidget] ${r}`),new j(H.RATE_LIMITED,`Rate limit exceeded. Please try again in ${Math.ceil(e/1e3)} seconds.`,!0)}return async function(t,e={}){const r={...J,...e};let n;for(let i=0;i<r.maxRetries;i++)try{return await t()}catch(o){if(n=o,!Z(o))throw o;if(i===r.maxRetries-1)throw o;const t=X(i,r);o instanceof j&&console.warn(`[TrestaWidget] Request failed (attempt ${i+1}/${r.maxRetries}): ${o.message}. Retrying in ${Math.round(t)}ms...`),await Y(t)}throw n}(async()=>{const e=`${this.config.baseURL}/api/widgets/${t}/public`;this.logger&&(this.logger.debug(`Fetching widget data from: ${e}`),this.logger.debug(`Using API key: ${this.apiKey?.substring(0,15)}...`));try{const r=await this.networkClient.request(e,{method:"GET",timeout:this.config.timeout,headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}});this.logger&&this.logger.debug("Received response:",r.status);const n=this.handleResponse(r,t);return this.transformApiResponse(n)}catch(r){if(r instanceof j)throw r;const e=`Unexpected error for widget ${t}:`;throw this.logger?this.logger.error(e,r):console.error(`[TrestaWidget] ${e}`,r),new j(H.API_ERROR,"An unexpected error occurred while fetching widget data",!0)}},{maxRetries:this.config.maxRetries})}transformApiResponse(t){this.logger&&this.logger.debug("Raw API response:",t);const e=t.data||t;if(!e||!e.widget){const t={hasData:!!e,hasWidget:!!e?.widget};throw this.logger?this.logger.error("Invalid API response structure:",t):console.error("[TrestaWidget] Invalid API response structure:",t),new j(H.PARSE_ERROR,"Invalid API response format",!1)}this.logger&&this.logger.debug("Transforming widget data:",{widgetId:e.widget.id,testimonialCount:e.testimonials?.length||0});const r=e.widget.settings??{},n=e.widget.layout||"grid",o=r.maxTestimonials??10,i="carousel"===n&&(r.autoRotate??!1),a=r.rotateInterval??5e3,s="carousel"===n&&(r.showNavigation??!0),l=r.columns??("grid"===n?3:1);return{widgetId:e.widget.id,config:{layout:{type:n,maxTestimonials:o,autoRotate:i,rotateInterval:a,showNavigation:s,columns:l},theme:{mode:r.theme||"light",primaryColor:e.widget.theme?.primaryColor||"#0066FF",secondaryColor:e.widget.theme?.secondaryColor||"#00CC99",fontFamily:r.fontFamily,cardStyle:r.cardStyle||"default"},display:{showRating:r.showRating??!0,showDate:r.showDate??!0,showAvatar:r.showAvatar??!0,showAuthorRole:r.showAuthorRole??!0,showAuthorCompany:r.showAuthorCompany??!0,maxTestimonials:o}},testimonials:(e.testimonials||[]).map(t=>({id:t.id,content:t.content,rating:t.rating,createdAt:t.createdAt,isPublished:!0,isApproved:!0,isOAuthVerified:t.isOAuthVerified||!1,oauthProvider:t.oauthProvider,author:{name:t.authorName,email:void 0,avatar:t.authorAvatar,role:t.authorRole,company:t.authorCompany},media:t.videoUrl?{type:"video",url:t.videoUrl}:void 0}))}}handleResponse(t,e){const{data:r,status:n,headers:o}=t;if(n>=200&&n<300)return r;switch(n){case 401:case 403:{const t=`Unauthorized access for widget ${e} (${n})`;throw this.logger?this.logger.error(t):console.error(`[TrestaWidget] ${t}`),new j(H.UNAUTHORIZED,"Unable to load testimonials. Please check your widget configuration.",!1)}case 404:{const t=`Widget ${e} not found (404)`;throw this.logger?this.logger.error(t):console.error(`[TrestaWidget] ${t}`),new j(H.INVALID_WIDGET_ID,"Widget not found. Please check your widget ID.",!1)}case 429:{const t=o.get("Retry-After"),r=t?1e3*parseInt(t,10):6e4,n=`Server rate limit for widget ${e}. Retry after ${r/1e3}s`;throw this.logger?this.logger.warn(n):console.warn(`[TrestaWidget] ${n}`),new j(H.RATE_LIMITED,`Rate limit exceeded. Please try again in ${Math.ceil(r/1e3)} seconds.`,!0)}case 500:case 502:case 503:case 504:{const t=`Server error for widget ${e} (${n})`;throw this.logger?this.logger.error(t):console.error(`[TrestaWidget] ${t}`),new j(H.API_ERROR,"Server error. Please try again later.",!0)}default:{const t=`Unexpected status code ${n} for widget ${e}`;throw this.logger?this.logger.error(t):console.error(`[TrestaWidget] ${t}`),new j(H.API_ERROR,`Unexpected error (${n}). Please try again later.`,n>=500)}}}getNetworkClient(){return this.networkClient}getRateLimiter(){return this.rateLimiter}updateConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}}const _t="testimonials";class pt{constructor(){g(this,"dbPromise",null),g(this,"available",null)}async isAvailable(){if(null!==this.available)return this.available;try{return"indexedDB"in window?((await new Promise((t,e)=>{const r=indexedDB.open("__test__",1);r.onerror=()=>e(r.error),r.onsuccess=()=>t(r.result),r.onupgradeneeded=()=>{r.result.createObjectStore("test")}})).close(),indexedDB.deleteDatabase("__test__"),this.available=!0,!0):(this.available=!1,!1)}catch(t){return console.warn("[TrestaWidget] IndexedDB unavailable, will use localStorage fallback:",t),this.available=!1,!1}}async getDB(){return this.dbPromise||(this.dbPromise=new Promise((t,e)=>{const r=indexedDB.open("tresta-widget-cache",1);r.onerror=()=>{e(new Error(`Failed to open IndexedDB: ${r.error}`))},r.onsuccess=()=>{t(r.result)},r.onupgradeneeded=t=>{const e=t.target.result;e.objectStoreNames.contains(_t)||e.createObjectStore(_t,{keyPath:"widgetId"}).createIndex("expiresAt","expiresAt",{unique:!1})}})),this.dbPromise}async get(t){try{const e=await this.getDB();return new Promise((r,n)=>{const o=e.transaction([_t],"readonly").objectStore(_t).get(t);o.onerror=()=>n(o.error),o.onsuccess=()=>{const e=o.result;e&&e.expiresAt<Date.now()?(this.delete(t).catch(()=>{}),r(null)):r(e||null)}})}catch(e){return console.error("[TrestaWidget] IndexedDB get error:",e),null}}async set(t,e){try{const t=await this.getDB();return new Promise((r,n)=>{const o=t.transaction([_t],"readwrite").objectStore(_t).put(e);o.onerror=()=>n(o.error),o.onsuccess=()=>r()})}catch(r){throw console.error("[TrestaWidget] IndexedDB set error:",r),r}}async delete(t){try{const e=await this.getDB();return new Promise((r,n)=>{const o=e.transaction([_t],"readwrite").objectStore(_t).delete(t);o.onerror=()=>n(o.error),o.onsuccess=()=>r()})}catch(e){throw console.error("[TrestaWidget] IndexedDB delete error:",e),e}}async clear(){try{const t=await this.getDB();return new Promise((e,r)=>{const n=t.transaction([_t],"readwrite").objectStore(_t).clear();n.onerror=()=>r(n.error),n.onsuccess=()=>e()})}catch(t){throw console.error("[TrestaWidget] IndexedDB clear error:",t),t}}async clearExpired(){try{const t=await this.getDB(),e=Date.now();return new Promise((r,n)=>{const o=t.transaction([_t],"readwrite").objectStore(_t).index("expiresAt"),i=IDBKeyRange.upperBound(e),a=o.openCursor(i);a.onerror=()=>n(a.error),a.onsuccess=t=>{const e=t.target.result;e?(e.delete(),e.continue()):r()}})}catch(t){console.error("[TrestaWidget] IndexedDB clearExpired error:",t)}}}const mt="tresta-widget-";class ft{constructor(){g(this,"available",null)}async isAvailable(){if(null!==this.available)return this.available;try{const t="__tresta_test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),this.available=!0,!0}catch(t){return console.warn("[TrestaWidget] localStorage unavailable:",t),this.available=!1,!1}}async get(t){try{const e=mt+t,r=localStorage.getItem(e);if(!r)return null;const n=JSON.parse(r);return n.expiresAt<Date.now()?(await this.delete(t),null):n}catch(e){return console.error("[TrestaWidget] localStorage get error:",e),null}}async set(t,e){try{const r=mt+t,n=JSON.stringify(e);localStorage.setItem(r,n)}catch(r){if(!(r instanceof DOMException)||"QuotaExceededError"!==r.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==r.name)throw console.error("[TrestaWidget] localStorage set error:",r),r;console.warn("[TrestaWidget] localStorage quota exceeded, clearing old entries"),await this.clearExpired();try{const r=mt+t,n=JSON.stringify(e);localStorage.setItem(r,n)}catch(n){throw console.error("[TrestaWidget] localStorage set error after cleanup:",n),n}}}async delete(t){try{const e=mt+t;localStorage.removeItem(e)}catch(e){throw console.error("[TrestaWidget] localStorage delete error:",e),e}}async clear(){try{const t=[];for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e);r&&r.startsWith(mt)&&t.push(r)}t.forEach(t=>localStorage.removeItem(t))}catch(t){throw console.error("[TrestaWidget] localStorage clear error:",t),t}}async clearExpired(){try{const e=Date.now(),r=[];for(let n=0;n<localStorage.length;n++){const o=localStorage.key(n);if(o&&o.startsWith(mt))try{const t=localStorage.getItem(o);t&&JSON.parse(t).expiresAt<e&&r.push(o)}catch(t){r.push(o)}}r.forEach(t=>localStorage.removeItem(t))}catch(e){console.error("[TrestaWidget] localStorage clearExpired error:",e)}}}const yt=864e5;class wt{constructor(){g(this,"adapter",null),g(this,"initPromise",null)}async init(){return this.initPromise||(this.initPromise=(async()=>{const t=new pt;if(await t.isAvailable())return this.adapter=t,console.log("[TrestaWidget] Using IndexedDB for caching"),void this.clearExpired().catch(()=>{});const e=new ft;if(await e.isAvailable())return this.adapter=e,console.log("[TrestaWidget] Using localStorage for caching (IndexedDB unavailable)"),void this.clearExpired().catch(()=>{});console.warn("[TrestaWidget] No storage available, caching disabled"),this.adapter=null})()),this.initPromise}async getAdapter(){return await this.init(),this.adapter}getCacheKey(t){return`tresta-widget-${t}`}getTTL(){return this.adapter instanceof pt?yt:this.adapter instanceof ft?36e5:yt}async get(t){try{const e=await this.getAdapter();if(!e)return null;const r=this.getCacheKey(t),n=await e.get(r);return n?n.data:null}catch(e){return console.error("[TrestaWidget] Cache get error:",e),null}}async set(t,e,r){try{const n=await this.getAdapter();if(!n)return;const o=this.getCacheKey(t),i=Date.now(),a={widgetId:t,data:e,timestamp:i,expiresAt:i+(r??this.getTTL())};await n.set(o,a)}catch(n){console.error("[TrestaWidget] Cache set error:",n)}}async delete(t){try{const e=await this.getAdapter();if(!e)return;const r=this.getCacheKey(t);await e.delete(r)}catch(e){console.error("[TrestaWidget] Cache delete error:",e)}}async clear(){try{const t=await this.getAdapter();if(!t)return;await t.clear()}catch(t){console.error("[TrestaWidget] Cache clear error:",t)}}async clearExpired(){try{const t=await this.getAdapter();if(!t)return;"clearExpired"in t&&"function"==typeof t.clearExpired&&await t.clearExpired()}catch(t){console.error("[TrestaWidget] Cache clearExpired error:",t)}}}class vt{constructor(t=.01){g(this,"samplingRate"),this.samplingRate=Math.max(0,Math.min(1,t))}shouldSample(){return Math.random()<this.samplingRate}setSamplingRate(t){this.samplingRate=Math.max(0,Math.min(1,t))}getSamplingRate(){return this.samplingRate}}class bt{constructor(t,e,r={}){g(this,"config"),g(this,"sampler"),g(this,"errorCounts",new Map),g(this,"loadStartTime",0),g(this,"widgetId"),g(this,"version"),g(this,"layoutType"),this.widgetId=t,this.version=e;const n=!1===r.enabled,o=this.isDNTEnabled();this.config={enabled:!n&&!o,samplingRate:r.samplingRate??.01,endpoint:r.endpoint??lt},this.sampler=new vt(this.config.samplingRate)}isDNTEnabled(){if("undefined"!=typeof navigator){const t=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;if("1"===t||"yes"===t||!0===t)return!0}return!1}startLoadTracking(){this.config.enabled&&(this.loadStartTime=performance.now())}trackLoad(t){if(!this.config.enabled)return;if(!this.sampler.shouldSample())return;this.layoutType=t||"unknown";const e=this.loadStartTime>0?performance.now()-this.loadStartTime:0,r={widgetId:this.widgetId,version:this.version,eventType:"load",loadTime:Math.round(e),layoutType:t||"unknown",timestamp:Date.now()};this.send(r)}trackError(t){if(!this.config.enabled)return;const e=this.errorCounts.get(t)||0;if(this.errorCounts.set(t,e+1),!this.sampler.shouldSample())return;const r={widgetId:this.widgetId,version:this.version,eventType:"error",errorCode:t,timestamp:Date.now()};this.send(r)}trackInteraction(t){if(!this.config.enabled)return;if(!this.sampler.shouldSample())return;const e={widgetId:this.widgetId,version:this.version,eventType:"interaction",layoutType:t||this.layoutType||"unknown",timestamp:Date.now()};this.send(e)}getTelemetryData(){const t=this.loadStartTime>0?performance.now()-this.loadStartTime:0,e={};return this.errorCounts.forEach((t,r)=>{e[r]=t}),{widgetId:this.widgetId,version:this.version,loadTime:Math.round(t),layoutType:this.layoutType||"unknown",errorCounts:e}}send(t){if(this.config.enabled&&this.config.endpoint)if("undefined"!=typeof navigator&&navigator.sendBeacon)try{const e=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon(this.config.endpoint,e)}catch(e){}else try{fetch(this.config.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0,credentials:"omit"}).catch(()=>{})}catch(e){}}isEnabled(){return this.config.enabled}setSamplingRate(t){this.config.samplingRate=t,this.sampler.setSamplingRate(t)}disable(){this.config.enabled=!1}enable(){this.isDNTEnabled()||(this.config.enabled=!0)}}function Rt(t){return[...t].sort((t,e)=>{const r=new Date(t.createdAt).getTime();return new Date(e.createdAt).getTime()-r})}class Tt{constructor(t,e="1.0.0",r=!1){g(this,"widgetId"),g(this,"version"),g(this,"debugEnabled"),this.widgetId=t,this.version=e,this.debugEnabled=r}debug(t,...e){this.debugEnabled}info(t,...e){console.log(`[TrestaWidget v${this.version}]`,t,...e)}warn(t,...e){console.warn(`[TrestaWidget v${this.version}]`,t,...e)}error(t,...e){console.error(`[TrestaWidget v${this.version}]`,t,...e)}logEmpty(){this.debugEnabled}isDebugEnabled(){return this.debugEnabled}getWidgetId(){return this.widgetId}getVersion(){return this.version}}const xt=[...ut];class Et{constructor(t={}){g(this,"config"),g(this,"violations",[]),this.config={allowedDomains:xt,reportViolations:!0,...t},this.config.reportViolations&&"undefined"!=typeof document&&this.setupViolationListener()}validateURL(t){if(!t)return!1;if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return!0;if(t.startsWith("data:"))return!0;try{const e=new URL(t).hostname;return this.config.allowedDomains.some(t=>e===t||e.endsWith(`.${t}`))}catch{return!1}}validateResources(t){const e=[];return t.querySelectorAll("img").forEach(t=>{const r=t.getAttribute("src");r&&!this.validateURL(r)&&e.push({type:"image",url:r,element:t,message:`Image source not from allowed domain: ${r}`})}),t.querySelectorAll("script").forEach(t=>{e.push({type:"script",url:t.getAttribute("src")||"inline",element:t,message:"Script tag found in widget content (CSP violation)"})}),t.querySelectorAll("iframe").forEach(t=>{e.push({type:"iframe",url:t.getAttribute("src")||"inline",element:t,message:"Iframe found in widget content (CSP violation)"})}),t.querySelectorAll("a").forEach(t=>{const r=t.getAttribute("href");r&&r.startsWith("javascript:")&&e.push({type:"link",url:r,element:t,message:"JavaScript URL in link (CSP violation)"})}),t.querySelectorAll("[onclick], [onload], [onerror], [onmouseover]").forEach(t=>{e.push({type:"inline-event",url:"inline",element:t,message:"Inline event handler found (CSP violation)"})}),{valid:0===e.length,violations:e}}async detectStrictCSP(){try{const t=document.querySelector('meta[http-equiv="Content-Security-Policy"]');if(t){const e=t.getAttribute("content")||"";return e.includes("'strict-dynamic'")||!e.includes("'unsafe-inline'")&&!e.includes("'unsafe-eval'")}}catch{}return!1}getNonce(){if(this.config.nonce)return this.config.nonce;if("undefined"!=typeof document){const t=document.querySelectorAll("script[data-widget-id]");for(const e of Array.from(t)){const t=e.getAttribute("nonce");if(t)return t}}return null}applyNonce(t){const e=this.getNonce();e&&("SCRIPT"!==t.tagName&&"STYLE"!==t.tagName||t.setAttribute("nonce",e))}getViolations(){return[...this.violations]}clearViolations(){this.violations=[]}setupViolationListener(){"undefined"!=typeof document&&document.addEventListener("securitypolicyviolation",t=>{t.blockedURI&&this.isWidgetRelated(t)&&(this.violations.push({type:"csp-violation",url:t.blockedURI,message:`CSP violation: ${t.violatedDirective} - ${t.blockedURI}`,directive:t.violatedDirective}),console.warn("[TrestaWidget] CSP violation detected:",{directive:t.violatedDirective,blockedURI:t.blockedURI,sourceFile:t.sourceFile}))})}isWidgetRelated(t){const e=t.blockedURI,r=t.sourceFile;return this.config.allowedDomains.some(t=>e.includes(t)||r?.includes(t))||r?.includes("tresta-widget")||e.includes("tresta-widget")}}new Et;var St=0;function kt(t,e,n,o,i,a){e||(e={});var s,l,c=e;if("ref"in c)for(l in c={},e)"ref"==l?s=e[l]:c[l]=e[l];var d={type:t,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--St,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof t&&(s=t.defaultProps))for(l in s)void 0===c[l]&&(c[l]=s[l]);return r.vnode&&r.vnode(d),d}function It(t){var e,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=It(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function At(...t){return function(){for(var t,e,r=0,n="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=It(t))&&(n&&(n+=" "),n+=e);return n}(t)}function Dt({filled:t}){return kt("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t?"#eab308":"none",stroke:t?"#eab308":"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"tresta-star",children:kt("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}function Ct({testimonial:t,displayOptions:e,theme:r}){const n="dark"===r.mode;return kt("div",{className:At("tresta-card",n?"tresta-card--dark":"tresta-card--light",`tresta-card--${r.cardStyle??"default"}`),children:kt("div",{className:"tresta-card__body",children:[e.showRating&&t.rating>0&&kt("div",{className:"tresta-card__stars",children:[1,2,3,4,5].map(e=>kt(Dt,{filled:e<=t.rating},e))}),kt("p",{className:At("tresta-card__content",n?"tresta-card__content--dark":"tresta-card__content--light"),children:['"',t.content,'"']}),kt("div",{className:"tresta-card__author",children:[e.showAvatar&&kt("div",{className:At("tresta-card__avatar",n?"tresta-card__avatar--dark":"tresta-card__avatar--light"),children:t.author.avatar?kt("img",{src:t.author.avatar,alt:t.author.name,className:"tresta-card__avatar-img",loading:"lazy"}):kt("span",{className:"tresta-card__avatar-initials",children:(o=t.author.name,o.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2))})}),kt("div",{children:[kt("p",{className:"tresta-card__name",children:t.author.name}),(e.showAuthorRole||e.showAuthorCompany)&&kt("p",{className:"tresta-card__meta",children:[e.showAuthorRole&&t.author.role,e.showAuthorRole&&e.showAuthorCompany&&", ",e.showAuthorCompany&&t.author.company]})]})]}),e.showDate&&kt("div",{className:At("tresta-card__date",n?"tresta-card__date--dark":"tresta-card__date--light"),children:new Date(t.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]})});var o}function Nt({testimonials:t,displayOptions:e,theme:r,layout:n}){return kt("div",{className:"tresta-grid",style:{display:"grid",gridTemplateColumns:"repeat(1, 1fr)",gap:"16px"},"data-cols":Math.min(n.columns??3,4),children:t.map(t=>kt(Ct,{testimonial:t,displayOptions:e,theme:r},t.id))})}function Mt({testimonials:t,displayOptions:e,theme:r}){return kt("div",{className:"tresta-list",style:{display:"flex",flexDirection:"column",gap:"16px"},children:t.map(t=>kt(Ct,{testimonial:t,displayOptions:e,theme:r},t.id))})}function Wt({testimonials:t,displayOptions:e,theme:r,layout:n}){return kt("div",{className:"tresta-masonry","data-cols":Math.min(n.columns??3,4),style:{columnCount:1,columnGap:"16px"},children:t.map(t=>kt("div",{className:"tresta-masonry-item",style:{breakInside:"avoid",marginBottom:"16px"},children:kt(Ct,{testimonial:t,displayOptions:e,theme:r})},t.id))})}var Pt,Ot,Ut,$t,Lt=0,qt=[],Bt=r,Ft=Bt.__b,Ht=Bt.__r,jt=Bt.diffed,zt=Bt.__c,Vt=Bt.unmount,Gt=Bt.__;function Kt(t,e){Bt.__h&&Bt.__h(Ot,t,Lt||e),Lt=0;var r=Ot.__H||(Ot.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function Jt(t,e){var r=Kt(Pt++,3);!Bt.__s&&ne(r.__H,e)&&(r.__=t,r.u=e,Ot.__H.__h.push(r))}function Xt(t,e){var r=Kt(Pt++,7);return ne(r.__H,e)&&(r.__=t(),r.__H=e,r.__h=t),r.__}function Yt(t,e){return Lt=8,Xt(function(){return t},e)}function Zt(){for(var t;t=qt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ee),t.__H.__h.forEach(re),t.__H.__h=[]}catch(e){t.__H.__h=[],Bt.__e(e,t.__v)}}Bt.__b=function(t){Ot=null,Ft&&Ft(t)},Bt.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Gt&&Gt(t,e)},Bt.__r=function(t){Ht&&Ht(t),Pt=0;var e=(Ot=t.__c).__H;e&&(Ut===Ot?(e.__h=[],Ot.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(ee),e.__h.forEach(re),e.__h=[],Pt=0)),Ut=Ot},Bt.diffed=function(t){jt&&jt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==qt.push(e)&&$t===Bt.requestAnimationFrame||(($t=Bt.requestAnimationFrame)||te)(Zt)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Ut=Ot=null},Bt.__c=function(t,e){e.some(function(t){try{t.__h.forEach(ee),t.__h=t.__h.filter(function(t){return!t.__||re(t)})}catch(r){e.some(function(t){t.__h&&(t.__h=[])}),e=[],Bt.__e(r,t.__v)}}),zt&&zt(t,e)},Bt.unmount=function(t){Vt&&Vt(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(t){try{ee(t)}catch(r){e=r}}),r.__H=void 0,e&&Bt.__e(e,r.__v))};var Qt="function"==typeof requestAnimationFrame;function te(t){var e,r=function(){clearTimeout(n),Qt&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,35);Qt&&(e=requestAnimationFrame(r))}function ee(t){var e=Ot,r=t.__c;"function"==typeof r&&(t.__c=void 0,r()),Ot=e}function re(t){var e=Ot;t.__c=t.__(),Ot=e}function ne(t,e){return!t||t.length!==e.length||e.some(function(e,r){return e!==t[r]})}function oe(t,e){return"function"==typeof e?e(t):e}function ie({testimonials:t,displayOptions:e,theme:r,layout:n}){const[o,i]=function(t){return Lt=1,function(t,e){var r=Kt(Pt++,2);if(r.t=t,!r.__c&&(r.__=[oe(void 0,e),function(t){var e=r.__N?r.__N[0]:r.__[0],n=r.t(e,t);e!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Ot,!Ot.__f)){var n=function(t,e,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter(function(t){return!!t.__c});if(i.every(function(t){return!t.__N}))return!o||o.call(this,t,e,n);var a=r.__c.props!==t;return i.forEach(function(t){if(t.__N){var e=t.__[0];t.__=t.__N,t.__N=void 0,e!==t.__[0]&&(a=!0)}}),o&&o.call(this,t,e,n)||a};Ot.__f=!0;var o=Ot.shouldComponentUpdate,i=Ot.componentWillUpdate;Ot.componentWillUpdate=function(t,e,r){if(this.__e){var a=o;o=void 0,n(t,e,r),o=a}i&&i.call(this,t,e,r)},Ot.shouldComponentUpdate=n}return r.__N||r.__}(oe,t)}(0),a=(Lt=5,Xt(function(){return{current:null}},[]));const s=t.length,l=n.autoRotate??!1,c=n.rotateInterval??5e3,d=!1!==n.showNavigation;Jt(()=>{if(!l||s<=1)return;const t=setInterval(()=>{i(t=>(t+1)%s)},c);return()=>clearInterval(t)},[l,c,s]),Jt(()=>{const t=a.current;if(!t)return;const e=t.children[o];e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},[o]);const u=Yt(t=>{i((t%s+s)%s)},[s]),h=Yt(()=>u(o-1),[o,u]),g=Yt(()=>u(o+1),[o,u]);return kt("div",{className:"tresta-carousel",style:{position:"relative",width:"100%"},children:[kt("div",{ref:a,className:"tresta-carousel-track",style:{display:"flex",overflowX:"auto",scrollSnapType:"x mandatory",scrollbarWidth:"none",gap:"16px"},children:t.map(t=>kt("div",{className:"tresta-carousel-slide",style:{flex:"0 0 100%",scrollSnapAlign:"start",minWidth:0},children:kt(Ct,{testimonial:t,displayOptions:e,theme:r})},t.id))}),d&&s>1&&kt(T,{children:[kt("button",{type:"button",onClick:h,className:"tresta-carousel-prev","aria-label":"Previous testimonial",children:kt("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:kt("polyline",{points:"15 18 9 12 15 6"})})}),kt("button",{type:"button",onClick:g,className:"tresta-carousel-next","aria-label":"Next testimonial",children:kt("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:kt("polyline",{points:"9 18 15 12 9 6"})})})]}),s>1&&kt("div",{className:"tresta-carousel-dots",children:t.map((t,e)=>kt("button",{type:"button",onClick:()=>u(e),className:"tresta-carousel-dot "+(e===o?"active":""),"aria-label":`Go to testimonial ${e+1}`},e))})]})}function ae(t){return 1+.01*((13*t+5)%7-3)}function se({testimonials:t,displayOptions:e,theme:r,layout:n}){return kt("div",{className:"tresta-wall","data-cols":Math.min(n.columns??3,4),style:{columnCount:1,columnGap:"12px"},children:t.map((t,n)=>{return kt("div",{className:"tresta-wall-item",style:{breakInside:"avoid",marginBottom:"12px",transform:`rotate(${o=n,.4*((7*o+3)%11-5)}deg) scale(${ae(n)})`,transition:"transform 0.3s ease"},children:kt(Ct,{testimonial:t,displayOptions:e,theme:r})},t.id);var o})})}function le({testimonials:t,displayOptions:e,theme:r}){if(0===t.length)return null;const n=Math.ceil(t.length/2),o=t.slice(0,n),i=t.slice(n);return kt("div",{className:"tresta-marquee",style:{overflow:"hidden",width:"100%"},children:[kt(ce,{items:o,displayOptions:e,theme:r,direction:"left"}),i.length>0&&kt("div",{style:{marginTop:"16px"},children:kt(ce,{items:i,displayOptions:e,theme:r,direction:"right"})})]})}function ce({items:t,displayOptions:e,theme:r,direction:n}){return kt("div",{className:"tresta-marquee-row "+("right"===n?"tresta-marquee-reverse":""),children:kt("div",{className:"tresta-marquee-track",children:[...t,...t].map((t,n)=>kt("div",{className:"tresta-marquee-item",children:kt(Ct,{testimonial:t,displayOptions:e,theme:r})},`${t.id}-${n}`))})})}function de({data:t}){const{testimonials:e,config:r}=t,{layout:n,display:o,theme:i}=r,a={testimonials:e,displayOptions:o,theme:i,layout:n};return kt("div",{className:"tresta-widget-root "+("dark"===i.mode?"tresta-widget-root--dark":""),children:[function(){switch(n.type){case"list":return kt(Mt,{...a});case"masonry":return kt(Wt,{...a});case"carousel":return kt(ie,{...a});case"wall":return kt(se,{...a});case"marquee":return kt(le,{...a});default:return kt(Nt,{...a})}}(),!1!==r.display?.showBranding&&kt("div",{className:"tresta-branding",children:kt("a",{href:"https://tresta.dev",target:"_blank",rel:"noopener noreferrer",className:"tresta-branding__link",children:"Powered by Tresta"})}),o.customCss&&kt("style",{dangerouslySetInnerHTML:{__html:o.customCss}})]})}const ue=new WeakMap;class he{constructor(t){g(this,"config"),g(this,"state"),g(this,"container",null),g(this,"root",null),g(this,"styleManager",null),g(this,"contentRoot",null),g(this,"liveRegion",null),g(this,"eventListeners",[]),g(this,"apiClient"),g(this,"storageManager"),g(this,"telemetryTracker"),g(this,"logger"),g(this,"cspValidator"),this.config=t,this.state={mounted:!1,loading:!1,error:null,data:null},this.logger=new Tt(t.widgetId,t.version||"1.0.0",t.debug||!1);const e=t.apiUrl?{baseURL:t.apiUrl}:{};this.apiClient=new gt(e,t.apiKey,this.logger),this.storageManager=new wt,this.telemetryTracker=new bt(t.widgetId,t.version||"1.0.0",{enabled:!1!==t.telemetry});const r={reportViolations:t.debug||!1};t.nonce&&(r.nonce=t.nonce),this.cspValidator=new Et(r),this.logger.debug("Initialized with config:",{widgetId:t.widgetId,apiKey:t.apiKey?`${t.apiKey.substring(0,15)}...`:"NOT PROVIDED",apiUrl:t.apiUrl||`default (${st})`,debug:t.debug,telemetry:t.telemetry,version:t.version}),this.logger.debug("Telemetry enabled:",this.telemetryTracker.isEnabled())}async mount(t){try{if(this.telemetryTracker.startLoadTracking(),ue.has(t)){const e=ue.get(t);e&&e!==this&&(console.warn("[TrestaWidget] Container already has a widget instance. Unmounting existing widget."),e.unmount())}this.container=t,this.state.mounted=!0,this.state.loading=!0,this.root=document.createElement("div"),this.root.setAttribute("data-tresta-widget",this.config.widgetId),this.root.setAttribute("data-version",this.config.version||"1.0.0"),this.root.setAttribute("data-instance-id",this.generateInstanceId()),this.config.lang&&this.root.setAttribute("lang",this.config.lang),this.root.setAttribute("role","region"),this.root.setAttribute("aria-label","Testimonials widget"),this.styleManager=new G({debug:this.config.debug??!1,theme:this.config.theme,...void 0!==this.config.useShadowDOM&&{useShadowDOM:this.config.useShadowDOM},nonceApplier:t=>this.cspValidator.applyNonce(t)}),this.contentRoot=this.styleManager.initializeStyles(this.root),this.liveRegion=document.createElement("div"),this.liveRegion.setAttribute("role","status"),this.liveRegion.setAttribute("aria-live","polite"),this.liveRegion.setAttribute("aria-atomic","true"),this.liveRegion.className="tresta-sr-only",this.contentRoot.appendChild(this.liveRegion),t.appendChild(this.root),ue.set(t,this),await this.fetchAndRender(),this.logger.debug("Mounted successfully to container",t)}catch(e){this.state.loading=!1,this.state.error=e,e instanceof j?this.telemetryTracker.trackError(e.code):this.telemetryTracker.trackError("MOUNT_ERROR"),this.logError("Mount failed",e),this.renderErrorState(e)}}async fetchAndRender(){try{this.logger.debug("Starting fetchAndRender"),this.state.loading=!0,this.announceToScreenReader("Loading testimonials");const t=await this.fetchWithFallback();this.logger.debug("Data fetched successfully:",{widgetId:t.widgetId,testimonialCount:t.testimonials?.length||0}),this.state.data=t,this.state.error=null,this.state.loading=!1,this.renderContent(t),this.telemetryTracker.trackLoad(t.config?.layout?.type);const e=t.testimonials?.length||0;this.announceToScreenReader(`${e} testimonial${1!==e?"s":""} loaded`)}catch(t){this.state.loading=!1,this.state.error=t,t instanceof j?this.telemetryTracker.trackError(t.code):this.telemetryTracker.trackError("FETCH_ERROR"),this.logError("Failed to fetch widget data",t),this.renderErrorState(t),this.announceToScreenReader("Failed to load testimonials","assertive")}}async fetchWithFallback(){try{const t=await this.apiClient.fetchWidgetData(this.config.widgetId);return await this.storageManager.set(this.config.widgetId,t),this.logger.debug("Fetched widget data from API"),t}catch(t){const e=await this.storageManager.get(this.config.widgetId);if(e)return this.logger.warn("Using cached data due to API error"),e;throw t}}renderContent(t){if(this.logger.debug("renderContent called",{hasContentRoot:!!this.contentRoot,testimonialCount:t.testimonials?.length||0,widgetData:t}),!this.contentRoot)return void this.logger.error("No content root available for rendering");const e=t.config.layout.maxTestimonials??t.config.display.maxTestimonials,r=function(t,e){if(!t||0===t.length)return[];const r=e??100;return r<=0?[]:t.length<=r?Rt(t):Rt(t).slice(0,r)}(t.testimonials,e),n={...t,testimonials:r};let o=this.contentRoot.querySelector(".tresta-app-root");if(o||(o=document.createElement("div"),o.className="tresta-app-root",this.contentRoot.appendChild(o)),F(b(de,{data:n}),o),this.logger.debug("Widget rendered successfully with Preact"),this.config.debug&&this.contentRoot){const t=this.cspValidator.validateResources(this.contentRoot);t.valid?this.logger.debug("CSP validation passed"):this.logger.warn("CSP violations detected:",t.violations)}}renderErrorState(t){if(!this.contentRoot)return;let e=this.config.errorMessage;e||(e=t instanceof j?t.message:"Unable to load testimonials. Please try again later."),this.contentRoot.innerHTML=`<div class="tresta-error">${e}</div>`}logError(t,e){e instanceof j?this.logger.error(`${t} for widget ${this.config.widgetId}:`,`[${e.code}]`,e.message):e instanceof Error?this.logger.error(`${t} for widget ${this.config.widgetId}:`,e.message):this.logger.error(`${t} for widget ${this.config.widgetId}:`,e)}unmount(){try{if(this.contentRoot){const t=this.contentRoot.querySelector(".tresta-app-root");t&&F(null,t)}this.cleanupEventListeners(),this.styleManager&&(this.styleManager.cleanup(),this.styleManager=null),this.root&&this.root.parentNode&&(this.root.parentNode.removeChild(this.root),this.root=null),this.container&&ue.delete(this.container),this.state.mounted=!1,this.container=null,this.contentRoot=null,this.logger.debug("Unmounted successfully")}catch(t){console.error("[TrestaWidget] Unmount failed:",t)}}async refresh(){try{if(this.logger.debug("Refresh requested"),!this.state.mounted)return void this.logger.warn("Cannot refresh: widget not mounted");await this.fetchAndRender()}catch(t){this.logError("Refresh failed",t)}}getState(){return{...this.state}}cleanupEventListeners(){this.eventListeners.forEach(({element:t,event:e,handler:r})=>{t.removeEventListener(e,r)}),this.eventListeners=[]}generateInstanceId(){return`${this.config.widgetId}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}announceToScreenReader(t,e="polite"){this.liveRegion&&(this.liveRegion.setAttribute("aria-live",e),this.liveRegion.textContent=t,setTimeout(()=>{this.liveRegion&&(this.liveRegion.textContent="")},1e3))}static getInstance(t){return ue.get(t)}getStyleManager(){return this.styleManager}getContentRoot(){return this.contentRoot}getTelemetryTracker(){return this.telemetryTracker}}function ge(t){try{const e=function(t){const e=function(t){const e=function(t){return t.getAttribute("data-widget-id")||t.getAttribute("data-tresta-widget")}(t),r=t.getAttribute("data-api-key"),n=t.getAttribute("data-version"),o=t.getAttribute("data-api-url"),i=t.getAttribute("nonce"),a={debug:"true"===t.getAttribute("data-debug"),telemetry:"false"!==t.getAttribute("data-telemetry")};e&&(a.widgetId=e),r&&(a.apiKey=r),a.version=n||"1.0.0",o&&(a.apiUrl=o),i&&(a.nonce=i);const s=z.parseThemeFromElement(t);return Object.keys(s).length>0&&(a.theme=s),a}(t);return function(t){if(!t.widgetId)throw new Error("[TrestaWidget] widgetId is required");if(!t.apiKey)throw new Error("[TrestaWidget] apiKey is required")}(e),e}(t),r=function(t,e){const r=t.getAttribute("data-container");if(r){const t=document.querySelector(r);if(!t)throw new Error(`[TrestaWidget] Container not found: ${r}`);return t}const n=document.getElementById(`tresta-widget-${e}`);if(n)return n;const o=document.createElement("div");return o.id=`tresta-widget-${e}`,t.parentNode?.insertBefore(o,t.nextSibling),o}(t,e.widgetId);if(he.getInstance(r))return void e.debug;new he(e).mount(r)}catch(e){console.error("[TrestaWidget] Failed to initialize widget:",e)}}function _e(){try{const t=document.querySelectorAll("script[data-widget-id], script[data-tresta-widget]");if(0===t.length)return;t.forEach(t=>{ge(t)})}catch(t){console.error("[TrestaWidget] Auto-initialization failed:",t)}}const pe={async mount(t,e){const r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`[TrestaWidget] Container not found: ${t}`);const n=new he(e);return await n.mount(r),n},unmount(t){const e="string"==typeof t?document.querySelector(t):t;if(!e)return void console.warn(`[TrestaWidget] Container not found: ${t}`);const r=he.getInstance(e);r?r.unmount():console.warn("[TrestaWidget] No widget instance found in container")},version:"1.0.0"};return"undefined"!=typeof window&&(window.TrestaWidget=pe,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_e):_e()),t.TrestaWidget=pe,t.Widget=he,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t}({});
//# sourceMappingURL=tresta-widget.js.map
